<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Changelog | Phabalicious</title>
    <meta name="generator" content="VuePress 1.9.5">
    
    <meta name="description" content="A deployment system and general purpose helper">
    
    <link rel="preload" href="/assets/css/0.styles.f9edc7ac.css" as="style"><link rel="preload" href="/assets/js/app.6b382d26.js" as="script"><link rel="preload" href="/assets/js/3.2184e550.js" as="script"><link rel="preload" href="/assets/js/12.8921015e.js" as="script"><link rel="prefetch" href="/assets/js/10.51e494e5.js"><link rel="prefetch" href="/assets/js/11.07753871.js"><link rel="prefetch" href="/assets/js/13.ed780963.js"><link rel="prefetch" href="/assets/js/14.68947b36.js"><link rel="prefetch" href="/assets/js/15.364a6690.js"><link rel="prefetch" href="/assets/js/16.24f8eca2.js"><link rel="prefetch" href="/assets/js/17.babaec76.js"><link rel="prefetch" href="/assets/js/18.c99d6156.js"><link rel="prefetch" href="/assets/js/19.81b07e7a.js"><link rel="prefetch" href="/assets/js/20.8eee2bea.js"><link rel="prefetch" href="/assets/js/21.ef9b0481.js"><link rel="prefetch" href="/assets/js/22.c337b1e1.js"><link rel="prefetch" href="/assets/js/23.fad1451d.js"><link rel="prefetch" href="/assets/js/24.79aefc24.js"><link rel="prefetch" href="/assets/js/25.a079a898.js"><link rel="prefetch" href="/assets/js/26.8f705b32.js"><link rel="prefetch" href="/assets/js/27.828f7a63.js"><link rel="prefetch" href="/assets/js/28.f7b6d275.js"><link rel="prefetch" href="/assets/js/29.159a173c.js"><link rel="prefetch" href="/assets/js/30.16e78a4f.js"><link rel="prefetch" href="/assets/js/31.b2e2bbf0.js"><link rel="prefetch" href="/assets/js/32.265cdd80.js"><link rel="prefetch" href="/assets/js/4.bc2a6058.js"><link rel="prefetch" href="/assets/js/5.0c470a50.js"><link rel="prefetch" href="/assets/js/6.29119eaa.js"><link rel="prefetch" href="/assets/js/7.e7ee370b.js"><link rel="prefetch" href="/assets/js/8.e34e246f.js"><link rel="prefetch" href="/assets/js/9.7b58ddf7.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.b9a44f16.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f9edc7ac.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Phabalicious</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/factorial-io/phabalicious" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/factorial-io/phabalicious" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/guide.html" class="sidebar-heading clickable open"><span>Documentation</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide.html" class="sidebar-link">How does phabalicious work in two sentences</a></li><li><a href="/installation.html" class="sidebar-link">Installation</a></li><li><a href="/usage.html" class="sidebar-link">Running phabalicious</a></li><li><a href="/configuration.html" class="sidebar-link">Structure of the configuration file</a></li><li><a href="/commands.html" class="sidebar-link">Available commands</a></li><li><a href="/inheritance.html" class="sidebar-link">Inheritance</a></li><li><a href="/docker-integration.html" class="sidebar-link">Docker integration</a></li><li><a href="/workspace.html" class="sidebar-link">Setup a local dev environment (multibasebox)</a></li><li><a href="/scripts.html" class="sidebar-link">Scripts</a></li><li><a href="/scaffolder.html" class="sidebar-link">Scaffolding arbitrary files</a></li><li><a href="/app-scaffold.html" class="sidebar-link">Scaffolding a new app</a></li><li><a href="/app-create-destroy.html" class="sidebar-link">Creating/ destroying an app from existing configuration</a></li><li><a href="/deploying-artifacts.html" class="sidebar-link">Deploying artifacts</a></li><li><a href="/kubernetes.html" class="sidebar-link">Kubernetes integration</a></li><li><a href="/offsite-backups.html" class="sidebar-link">Offsite backups</a></li><li><a href="/local-overrides.html" class="sidebar-link">Local overrides</a></li><li><a href="/passwords.html" class="sidebar-link">Passwords and secrets</a></li><li><a href="/contribute.html" class="sidebar-link">Contributing to Phabalicious</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/blog/" class="sidebar-heading clickable"><span>Blog</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/introduction.html" class="sidebar-link">A short introduction into phabalicious</a></li><li><a href="/blog/architecture.html" class="sidebar-link">Introduction and overall architecture</a></li><li><a href="/blog/whats-new-in-phab-3-7.html" class="sidebar-link">What's new in phabalicious 3.7?</a></li><li><a href="/blog/how-to-use-secrets.html" class="sidebar-link">Handling secrets with phabalicious</a></li></ul></section></li><li><a href="/Changelog.html" aria-current="page" class="active sidebar-link">Changelog</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Changelog.html#_3-7-12-2022-05-30" class="sidebar-link">3.7.12 / 2022-05-30</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-7-11-2022-05-30" class="sidebar-link">3.7.11 / 2022-05-30</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-7-10-2022-04-19" class="sidebar-link">3.7.10 / 2022-04-19</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-7-9-2022-04-02" class="sidebar-link">3.7.9 / 2022-04-02</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-7-8-2022-03-15" class="sidebar-link">3.7.8 / 2022-03-15</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-7-7-2022-03-02" class="sidebar-link">3.7.7 / 2022-03-02</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-7-6-2022-01-18" class="sidebar-link">3.7.6 / 2022-01-18</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-7-5-2021-12-17" class="sidebar-link">3.7.5 / 2021-12-17</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-7-4-2021-12-08" class="sidebar-link">3.7.4 / 2021-12-08</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-7-3-2021-12-02" class="sidebar-link">3.7.3 / 2021-12-02</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-7-2-2021-11-30" class="sidebar-link">3.7.2 / 2021-11-30</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-7-1-2021-11-11" class="sidebar-link">3.7.1 / 2021-11-11</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-7-0" class="sidebar-link">3.7.0</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-6-16-2021-09-23" class="sidebar-link">3.6.16 / 2021-09-23</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-6-15-2021-08-04" class="sidebar-link">3.6.15 / 2021-08-04</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-6-14-2021-07-01" class="sidebar-link">3.6.14 / 2021-07-01</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-6-13-2021-07-01" class="sidebar-link">3.6.13 / 2021-07-01</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-6-12-2021-06-30" class="sidebar-link">3.6.12 / 2021-06-30</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-6-11-2021-06-01" class="sidebar-link">3.6.11 / 2021-06-01</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-6-10-2021-05-20" class="sidebar-link">3.6.10 / 2021-05-20</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-6-9-2021-05-19" class="sidebar-link">3.6.9 / 2021-05-19</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-6-8-2021-05-19" class="sidebar-link">3.6.8 / 2021-05-19</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-6-7-2021-05-19" class="sidebar-link">3.6.7 / 2021-05-19</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-6-6-2021-05-13" class="sidebar-link">3.6.6 / 2021-05-13</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-6-5-2021-05-11" class="sidebar-link">3.6.5 / 2021-05-11</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-6-4-2021-04-30" class="sidebar-link">3.6.4 / 2021-04-30</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-6-3-2021-04-15" class="sidebar-link">3.6.3 / 2021-04-15</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-6-2-2021-04-14" class="sidebar-link">3.6.2 / 2021-04-14</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-6-1-2021-04-14" class="sidebar-link">3.6.1 / 2021-04-14</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-6-0-2021-04-07" class="sidebar-link">3.6.0 / 2021-04-07</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-6-0-beta-9-2021-04-06" class="sidebar-link">3.6.0-beta.9 / 2021-04-06</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-6-0-beta-8-2021-04-06" class="sidebar-link">3.6.0-beta.8 / 2021-04-06</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-6-0-beta-7-2021-03-29" class="sidebar-link">3.6.0-beta.7 / 2021-03-29</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-6-0-beta-6-2021-03-25" class="sidebar-link">3.6.0-beta.6 / 2021-03-25</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-6-0-beta-5-2021-03-24" class="sidebar-link">3.6.0-beta.5 / 2021-03-24</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-6-0-beta-4-2021-03-24" class="sidebar-link">3.6.0-beta.4 / 2021-03-24</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-6-0-beta-3-2021-03-24" class="sidebar-link">3.6.0-beta.3 / 2021-03-24</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-6-0-beta-2-2021-03-24" class="sidebar-link">3.6.0-beta.2 / 2021-03-24</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-6-0-beta-1-2021-03-23" class="sidebar-link">3.6.0-beta.1 / 2021-03-23</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-5-36-2021-03-15" class="sidebar-link">3.5.36 / 2021-03-15</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-5-35-2021-03-14" class="sidebar-link">3.5.35 / 2021-03-14</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-5-34-2021-03-11" class="sidebar-link">3.5.34 / 2021-03-11</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#new-9" class="sidebar-link">New</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#changed-6" class="sidebar-link">Changed:</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-5-33-2021-03-04" class="sidebar-link">3.5.33 / 2021-03-04</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#fixed-18" class="sidebar-link">Fixed:</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-5-32-2021-03-01" class="sidebar-link">3.5.32 / 2021-03-01</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-5-31-2021-03-01" class="sidebar-link">3.5.31 / 2021-03-01</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-5-30-2021-01-27" class="sidebar-link">3.5.30 / 2021-01-27</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-5-29-2021-01-21" class="sidebar-link">3.5.29 / 2021-01-21</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-5-28-2021-01-15" class="sidebar-link">3.5.28 / 2021-01-15</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-5-27-2020-11-12" class="sidebar-link">3.5.27 / 2020-11-12</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-5-26-2020-11-12" class="sidebar-link">3.5.26 / 2020-11-12</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-5-25-2020-11-12" class="sidebar-link">3.5.25 / 2020-11-12</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-5-24-2020-11-06" class="sidebar-link">3.5.24 / 2020-11-06</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-5-23-2020-11-06" class="sidebar-link">3.5.23 / 2020-11-06</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-5-22-2020-10-18" class="sidebar-link">3.5.22 / 2020-10-18</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-5-21-2020-10-11" class="sidebar-link">3.5.21 / 2020-10-11</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-5-20-2020-10-11" class="sidebar-link">3.5.20 / 2020-10-11</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-5-19-2020-10-09" class="sidebar-link">3.5.19 / 2020-10-09</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-5-18-2020-10-07" class="sidebar-link">3.5.18 / 2020-10-07</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-5-17-2020-10-01" class="sidebar-link">3.5.17 / 2020-10-01</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-5-16-2020-09-27" class="sidebar-link">3.5.16 / 2020-09-27</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-5-15-2020-09-18" class="sidebar-link">3.5.15 / 2020-09-18</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-5-14-2020-09-16" class="sidebar-link">3.5.14 / 2020-09-16</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-5-13-2020-09-15" class="sidebar-link">3.5.13 / 2020-09-15</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-5-12-2020-09-09" class="sidebar-link">3.5.12 / 2020-09-09</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-5-11-2020-09-08" class="sidebar-link">3.5.11 / 2020-09-08</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-5-10-2020-09-08" class="sidebar-link">3.5.10 / 2020-09-08</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-5-9-2020-08-31" class="sidebar-link">3.5.9 / 2020-08-31</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-5-8-2020-08-26" class="sidebar-link">3.5.8 / 2020-08-26</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#fixed-34" class="sidebar-link">Fixed:</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-5-7-2020-08-25" class="sidebar-link">3.5.7 / 2020-08-25</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-5-6-2020-08-22" class="sidebar-link">3.5.6 / 2020-08-22</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-5-5-2020-08-18" class="sidebar-link">3.5.5 / 2020-08-18</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-5-4-2020-08-17" class="sidebar-link">3.5.4 / 2020-08-17</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-5-3-2020-08-11" class="sidebar-link">3.5.3 / 2020-08-11</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#fixed-36" class="sidebar-link">Fixed:</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-5-2-2020-08-07" class="sidebar-link">3.5.2 / 2020-08-07</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-5-1-2020-08-04" class="sidebar-link">3.5.1 / 2020-08-04</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-5-0-2020-08-04" class="sidebar-link">3.5.0 / 2020-08-04</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-4-9-2020-07-24" class="sidebar-link">3.4.9 / 2020-07-24</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-4-8-2020-07-16" class="sidebar-link">3.4.8 / 2020-07-16</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-4-7-2020-06-29" class="sidebar-link">3.4.7 / 2020-06-29</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-4-6-2020-06-29" class="sidebar-link">3.4.6 / 2020-06-29</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-4-5-2020-05-18" class="sidebar-link">3.4.5 / 2020-05-18</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-4-4-2020-05-18" class="sidebar-link">3.4.4 / 2020-05-18</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-4-3-2020-04-29" class="sidebar-link">3.4.3 / 2020-04-29</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-4-2-2020-04-28" class="sidebar-link">3.4.2 / 2020-04-28</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-4-1-2020-04-25" class="sidebar-link">3.4.1 / 2020-04-25</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-4-0" class="sidebar-link">3.4.0</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-3-5-2020-03-02" class="sidebar-link">3.3.5 / 2020-03-02</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-3-4-2020-01-21" class="sidebar-link">3.3.4 / 2020-01-21</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-3-3-2020-01-15" class="sidebar-link">3.3.3 / 2020-01-15</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-3-1-2020-01-06" class="sidebar-link">3.3.1 / 2020-01-06</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-3-0-2020-01-03" class="sidebar-link">3.3.0 / 2020-01-03</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-2-15-2019-12-30" class="sidebar-link">3.2.15 / 2019-12-30</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-2-14-2019-12-19" class="sidebar-link">3.2.14 / 2019-12-19</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-2-13-2019-12-15" class="sidebar-link">3.2.13 / 2019-12-15</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-2-12-2019-12-14" class="sidebar-link">3.2.12 / 2019-12-14</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-2-11-2019-12-14" class="sidebar-link">3.2.11 / 2019-12-14</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-2-10-2019-12-12" class="sidebar-link">3.2.10 / 2019-12-12</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-2-9-2019-12-11" class="sidebar-link">3.2.9 / 2019-12-11</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-2-8-2019-12-10" class="sidebar-link">3.2.8 / 2019-12-10</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-2-7-2019-12-06" class="sidebar-link">3.2.7 / 2019-12-06</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-2-6-2019-12-01" class="sidebar-link">3.2.6 / 2019-12-01</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-2-5-2019-12-01" class="sidebar-link">3.2.5 / 2019-12-01</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-2-4-2019-11-23" class="sidebar-link">3.2.4 / 2019-11-23</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-2-3-2019-11-18" class="sidebar-link">3.2.3 / 2019-11-18</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-2-2-2019-11-14" class="sidebar-link">3.2.2 / 2019-11-14</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-2-1-2019-10-14" class="sidebar-link">3.2.1 / 2019-10-14</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-2-0-2019-10-14" class="sidebar-link">3.2.0 / 2019-10-14</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-1-0-2019-09-27" class="sidebar-link">3.1.0 / 2019-09-27</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-1-0-beta-1-2019-09-14" class="sidebar-link">3.1.0-beta.1 / 2019-09-14</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-0-22-2019-09-12" class="sidebar-link">3.0.22 / 2019-09-12</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-0-21-2019-08-21" class="sidebar-link">3.0.21 / 2019-08-21</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-0-20-2019-07-07" class="sidebar-link">3.0.20 / 2019-07-07</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-0-19-2019-06-25" class="sidebar-link">3.0.19 / 2019-06-25</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-0-18-2019-06-18" class="sidebar-link">3.0.18 / 2019-06-18</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-0-16-2019-06-09" class="sidebar-link">3.0.16 / 2019-06-09</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-0-15-2019-06-07" class="sidebar-link">3.0.15 / 2019-06-07</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-0-14-2019-05-28" class="sidebar-link">3.0.14 / 2019-05-28</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-0-12-2019-05-27" class="sidebar-link">3.0.12 / 2019-05-27</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-0-11-2019-05-19" class="sidebar-link">3.0.11 / 2019-05-19</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-0-10-2019-05-19" class="sidebar-link">3.0.10 / 2019-05-19</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-0-9-2019-05-11" class="sidebar-link">3.0.9 / 2019-05-11</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-0-8-2019-05-10" class="sidebar-link">3.0.8 / 2019-05-10</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-0-7-2019-05-01" class="sidebar-link">3.0.7 / 2019-05-01</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-0-6-2019-04-25" class="sidebar-link">3.0.6 / 2019-04-25</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-0-5-2019-04-17" class="sidebar-link">3.0.5 / 2019-04-17</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-0-4-2019-03-18" class="sidebar-link">3.0.4 / 2019-03-18</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-0-3-2019-03-07" class="sidebar-link">3.0.3 / 2019-03-07</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-0-2-2019-03-01" class="sidebar-link">3.0.2 / 2019-03-01</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-0-1-2019-02-25" class="sidebar-link">3.0.1 / 2019-02-25</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-0-0-2019-02-14" class="sidebar-link">3.0.0 / 2019-02-14</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-0-0-beta-6-2019-02-08" class="sidebar-link">3.0.0-beta.6 / 2019-02-08</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-0-0-beta-5-2019-02-05" class="sidebar-link">3.0.0-beta.5 / 2019-02-05</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-0-0-beta-4-2019-01-28" class="sidebar-link">3.0.0-beta.4 / 2019-01-28</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-0-0-beta-3-2019-01-26" class="sidebar-link">3.0.0-beta.3 / 2019-01-26</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-0-0-beta-2-2019-01-19" class="sidebar-link">3.0.0-beta.2 / 2019-01-19</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-0-0-beta-1-2019-01-10" class="sidebar-link">3.0.0-beta.1 / 2019-01-10</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-0-0-alpha-8-2018-12-20" class="sidebar-link">3.0.0-alpha.8 / 2018-12-20</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-0-0-alpha-7-2018-12-14" class="sidebar-link">3.0.0-alpha.7 / 2018-12-14</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-0-0-alpha-6-2018-12-11" class="sidebar-link">3.0.0-alpha.6 / 2018-12-11</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-0-0-alpha-5-2018-12-08" class="sidebar-link">3.0.0-alpha.5 / 2018-12-08</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-0-0-alpha-4-2018-12-08" class="sidebar-link">3.0.0-alpha.4 / 2018-12-08</a></li><li class="sidebar-sub-header"><a href="/Changelog.html#_3-0-0-develop" class="sidebar-link">3.0.0 develop</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="changelog"><a href="#changelog" class="header-anchor">#</a> Changelog</h1> <h2 id="_3-7-12-2022-05-30"><a href="#_3-7-12-2022-05-30" class="header-anchor">#</a> 3.7.12 / 2022-05-30</h2> <h3 id="fixes"><a href="#fixes" class="header-anchor">#</a> Fixes:</h3> <ul><li>fix(k8s): Add test coverage for k8s scaffold, fixed some bugs because of race-conditions</li></ul> <h2 id="_3-7-11-2022-05-30"><a href="#_3-7-11-2022-05-30" class="header-anchor">#</a> 3.7.11 / 2022-05-30</h2> <h3 id="fixes-2"><a href="#fixes-2" class="header-anchor">#</a> Fixes:</h3> <ul><li>fix(k8s): Fix the real bug which prevents scaffolding k8s files introduced with 3.7.10</li></ul> <h2 id="_3-7-10-2022-04-19"><a href="#_3-7-10-2022-04-19" class="header-anchor">#</a> 3.7.10 / 2022-04-19</h2> <h3 id="fixes-3"><a href="#fixes-3" class="header-anchor">#</a> Fixes:</h3> <ul><li>fix(k8s): Fix bug in cleanup code for the temporary scaffold folder</li></ul> <h2 id="_3-7-9-2022-04-02"><a href="#_3-7-9-2022-04-02" class="header-anchor">#</a> 3.7.9 / 2022-04-02</h2> <h3 id="fixes-4"><a href="#fixes-4" class="header-anchor">#</a> Fixes:</h3> <ul><li>fix: [#260] self-update --allow-unstable=1 toggles between stable and unstable version</li> <li>Updated dependencies</li></ul> <h2 id="_3-7-8-2022-03-15"><a href="#_3-7-8-2022-03-15" class="header-anchor">#</a> 3.7.8 / 2022-03-15</h2> <h3 id="fixes-5"><a href="#fixes-5" class="header-anchor">#</a> Fixes:</h3> <ul><li>notify: Handle <code>--channel</code> option correctly.</li></ul> <h2 id="_3-7-7-2022-03-02"><a href="#_3-7-7-2022-03-02" class="header-anchor">#</a> 3.7.7 / 2022-03-02</h2> <h3 id="fixes-6"><a href="#fixes-6" class="header-anchor">#</a> Fixes:</h3> <ul><li>Check only params for globally used parameter options (Fixes #254)</li> <li>Remove accidentally added composer mirror</li> <li>Use mysql port information when running install</li></ul> <h3 id="chore"><a href="#chore" class="header-anchor">#</a> Chore:</h3> <ul><li>Introduce renovate bot to update dependencies automatically</li> <li>Update depencencies</li></ul> <h2 id="_3-7-6-2022-01-18"><a href="#_3-7-6-2022-01-18" class="header-anchor">#</a> 3.7.6 / 2022-01-18</h2> <h3 id="fixes-7"><a href="#fixes-7" class="header-anchor">#</a> Fixes:</h3> <ul><li>Show warnings always</li></ul> <h2 id="_3-7-5-2021-12-17"><a href="#_3-7-5-2021-12-17" class="header-anchor">#</a> 3.7.5 / 2021-12-17</h2> <h3 id="fixes-8"><a href="#fixes-8" class="header-anchor">#</a> Fixes:</h3> <ul><li>Use <code>--no-defaults</code> for mysql commands</li> <li>Use same mysql dump options as drush</li> <li>Add error handling when drush tries to get the db credentials</li> <li>Fix problems with tilde in file path in mysql method</li> <li>Reset admin password after drupal is deployed completely (Fixes #211)</li></ul> <h2 id="_3-7-4-2021-12-08"><a href="#_3-7-4-2021-12-08" class="header-anchor">#</a> 3.7.4 / 2021-12-08</h2> <h3 id="fixes-9"><a href="#fixes-9" class="header-anchor">#</a> Fixes:</h3> <ul><li>When getting a dump from a database mimic the behavior of drush, get the full
structure but ignore data from certain tables (defined in <code>sqlSkipTables</code>)</li> <li>When copying files do not interact with the database</li></ul> <h3 id="new"><a href="#new" class="header-anchor">#</a> New:</h3> <ul><li>New <code>db</code>-subcommands:
<ul><li><code>db:install</code> will install a new database</li> <li><code>db:drop</code> will drop all tables in the database</li> <li><code>db:shell</code> will run a database cli to work directly with the DB (similar to <code>drush sql-cli</code>)</li> <li><code>db:shell:command</code> will print out the command necessary to run a the db cli</li></ul></li></ul> <h2 id="_3-7-3-2021-12-02"><a href="#_3-7-3-2021-12-02" class="header-anchor">#</a> 3.7.3 / 2021-12-02</h2> <h3 id="fixes-10"><a href="#fixes-10" class="header-anchor">#</a> Fixes:</h3> <ul><li>Get credentials before trying to wait for the database</li> <li>Add output-option to <code>get:property</code>-command to save the output to a file</li></ul> <h2 id="_3-7-2-2021-11-30"><a href="#_3-7-2-2021-11-30" class="header-anchor">#</a> 3.7.2 / 2021-11-30</h2> <h3 id="fixes-11"><a href="#fixes-11" class="header-anchor">#</a> Fixes:</h3> <ul><li>Resolve secrets for <code>get:property</code> and add options to get output as yaml or json</li> <li>Introduce useNfs for multibasebox scaffolder</li> <li>Install db before running copy-from</li> <li>Plugin discovery works when phab is started from a subfolder. Fixes #207</li></ul> <h2 id="_3-7-1-2021-11-11"><a href="#_3-7-1-2021-11-11" class="header-anchor">#</a> 3.7.1 / 2021-11-11</h2> <h3 id="fixes-12"><a href="#fixes-12" class="header-anchor">#</a> Fixes:</h3> <ul><li>Add support for protected properties which wont be overridden by override-files.</li></ul> <h2 id="_3-7-0"><a href="#_3-7-0" class="header-anchor">#</a> 3.7.0</h2> <h3 id="breaking-changes"><a href="#breaking-changes" class="header-anchor">#</a> Breaking changes:</h3> <ul><li>phabalicious now requires PHP 7.2</li> <li>failing drush commands will now exit phab with an error code, instead of
continuing. This might break your deployments.  To switch back to the old
behaviour set <code>drushErrorHandling</code> to <code>lax</code></li></ul> <h3 id="new-2"><a href="#new-2" class="header-anchor">#</a> New</h3> <ul><li><p>Introduction of script execution contexts. Scripts can now be executed in a
docker image of your choice, or inside an service of a docker-compose setup</p> <p>For scripts using the <code>docker-image</code>-script-context</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">scripts</span><span class="token punctuation">:</span>
  <span class="token key atrule">build-frontend</span><span class="token punctuation">:</span>
    <span class="token key atrule">script</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> npm install <span class="token punctuation">-</span>g gulp<span class="token punctuation">-</span>cli
      <span class="token punctuation">-</span> npm install
      <span class="token punctuation">-</span> gulp run
    <span class="token key atrule">finally</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> rm <span class="token punctuation">-</span>rf node_modules
    <span class="token key atrule">context</span><span class="token punctuation">:</span> docker<span class="token punctuation">-</span>image
    <span class="token key atrule">image</span><span class="token punctuation">:</span> node<span class="token punctuation">:</span><span class="token number">12</span>
    <span class="token key atrule">user</span><span class="token punctuation">:</span> node <span class="token comment"># Optional user, if not specified, the current uid:gid will be used</span>
</code></pre></div><p>The current folder is mounted to <code>/app</code> in the container, and the current user-
and group will be used inside the running container. If you need to persist any
files after the container got killed, make sure to copy/ move them into the
<code>/app</code>-folder.</p> <p>The container will be removed after the script finishes. Before the script is
executed, phabalicious will pull the docker-image.</p> <p>The <code>finally</code>-step will executed after the script, it allows to cleanup any
leftovers, regardless of the result of the script-execution (e.g. returned
early because of an error).</p> <p><code>script</code>-actions for scaffolders are supporting this too, e.g.</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">hosts</span><span class="token punctuation">:</span>
  <span class="token key atrule">scaffold</span><span class="token punctuation">:</span>
    <span class="token key atrule">actions</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">action</span><span class="token punctuation">:</span> script
        <span class="token key atrule">arguments</span><span class="token punctuation">:</span>
          <span class="token key atrule">context</span><span class="token punctuation">:</span> docker<span class="token punctuation">-</span>image
          <span class="token key atrule">image</span><span class="token punctuation">:</span> node<span class="token punctuation">:</span><span class="token number">14</span>
          <span class="token key atrule">script</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> npm install <span class="token punctuation">-</span>g gulp<span class="token punctuation">-</span>cli
            <span class="token punctuation">-</span> npm install
            <span class="token punctuation">-</span> gulp run
</code></pre></div><p>For scripts using the <code>docker-compose-run</code> script-context:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">scripts</span><span class="token punctuation">:</span>
  <span class="token key atrule">test:backend</span><span class="token punctuation">:</span>
    <span class="token key atrule">script</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> composer install
      <span class="token punctuation">-</span> php artisan db<span class="token punctuation">:</span>wipe <span class="token punctuation">-</span><span class="token punctuation">-</span>force
      <span class="token punctuation">-</span> php artisan migrate
      <span class="token punctuation">-</span> php artisan db<span class="token punctuation">:</span>seed
      <span class="token punctuation">-</span> vendor/bin/phpunit
    <span class="token key atrule">context</span><span class="token punctuation">:</span> docker<span class="token punctuation">-</span>compose<span class="token punctuation">-</span>run
    <span class="token key atrule">rootFolder</span><span class="token punctuation">:</span> ./hosting/tests
    <span class="token key atrule">service</span><span class="token punctuation">:</span> php
    <span class="token key atrule">workingDir</span><span class="token punctuation">:</span> /app <span class="token comment">#working dir in the php service</span>
</code></pre></div><p>Corresponding <code>docker-compose.yml</code>:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">'2.1'</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">php</span><span class="token punctuation">:</span>
    <span class="token key atrule">depends_on</span><span class="token punctuation">:</span>
      <span class="token key atrule">db</span><span class="token punctuation">:</span>
        <span class="token key atrule">condition</span><span class="token punctuation">:</span> service_healthy
    <span class="token key atrule">build</span><span class="token punctuation">:</span>
      <span class="token key atrule">context</span><span class="token punctuation">:</span> ../../
      <span class="token key atrule">dockerfile</span><span class="token punctuation">:</span> ./hosting/builder/Dockerfile

    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token key atrule">DB_PASSWORD</span><span class="token punctuation">:</span> root
      <span class="token key atrule">DB_USERNAME</span><span class="token punctuation">:</span> root
      <span class="token key atrule">DB_DATABASE</span><span class="token punctuation">:</span> tests
      <span class="token key atrule">DB_HOST</span><span class="token punctuation">:</span> db
      <span class="token key atrule">APP_ENV</span><span class="token punctuation">:</span> local
  <span class="token key atrule">db</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> mysql<span class="token punctuation">:</span><span class="token number">8</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token key atrule">MYSQL_ROOT_PASSWORD</span><span class="token punctuation">:</span> root
      <span class="token key atrule">MYSQL_DATABASE</span><span class="token punctuation">:</span> tests
    <span class="token key atrule">healthcheck</span><span class="token punctuation">:</span>
        <span class="token key atrule">test</span><span class="token punctuation">:</span> <span class="token string">&quot;mysqladmin -u root -proot ping&quot;</span>

</code></pre></div><p>This will use the <code>docker-compose.yml</code> from <code>hosting/tests</code> and run
<code>docker-compose run php</code> and exetute the script inside the <code>php</code>-service.
This works very well for scenarios where your app need other services to
function, like in this case a mysql database. In contrast to the <code>docker-image</code>-
script-context no folders are mounted into the service. You need to set this up
via your docker-compose.yml</p></li> <li><p>Add <code>md5</code>-twig-filter to scaffolder</p> <div class="language-twig extra-class"><pre class="language-twig"><code>aValue: &quot;<span class="token twig language-twig"><span class="token delimiter punctuation">{{</span> <span class="token string"><span class="token punctuation">&quot;</span>Hello world<span class="token punctuation">&quot;</span></span> <span class="token operator">|</span> md5 <span class="token delimiter punctuation">}}</span></span>&quot;
</code></pre></div><p>will be scaffolded to</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">aValue</span><span class="token punctuation">:</span> <span class="token string">&quot;f0ef7081e1539ac00ef5b761b4fb01b3&quot;</span>
</code></pre></div></li> <li><p>Add <code>secret</code>-twig-function to the scaffolder. It will return the value for a given secret.</p> <div class="language-twig extra-class"><pre class="language-twig"><code>The mysql-password is <span class="token twig language-twig"><span class="token delimiter punctuation">{{</span> secret<span class="token punctuation">(</span><span class="token string"><span class="token punctuation">&quot;</span>mysql-password<span class="token punctuation">&quot;</span></span> <span class="token delimiter punctuation">}}</span></span>
</code></pre></div></li> <li><p>Host-configs can be hidden from <code>list:hosts</code> by setting <code>hidden</code> to <code>true</code></p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">hosts</span><span class="token punctuation">:</span>
  <span class="token key atrule">hiddenHost</span><span class="token punctuation">:</span>
    <span class="token key atrule">hidden</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># host config will not be shownn on `list:hsots`</span>
</code></pre></div></li> <li><p>Add a new <code>info</code>-section to <code>host</code>-configs and a project specific <code>description</code>. This allows the user to add a short
description and one or more urls which will be displayed on <code>phab list:hosts</code></p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">description</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token punctuation">-</span>
  A multiline global project description which will be outputted on
  list<span class="token punctuation">:</span>hosts

<span class="token key atrule">hosts</span><span class="token punctuation">:</span>
  <span class="token key atrule">local</span><span class="token punctuation">:</span>
    <span class="token key atrule">info</span><span class="token punctuation">:</span>
      <span class="token key atrule">description</span><span class="token punctuation">:</span> A local installation aimed for development
      <span class="token key atrule">publicUrl</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//localhost
      <span class="token key atrule">category</span><span class="token punctuation">:</span>
        <span class="token key atrule">id</span><span class="token punctuation">:</span> local
        <span class="token key atrule">label</span><span class="token punctuation">:</span> Local installations
   <span class="token key atrule">someDevInstance</span><span class="token punctuation">:</span>
    <span class="token key atrule">info</span><span class="token punctuation">:</span>
      <span class="token key atrule">description</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token punctuation">-</span>
        A multiline string describing someDevInstance which has multiple public
        urls
      <span class="token key atrule">publicUrls</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> https<span class="token punctuation">:</span>//web.example.com
        <span class="token punctuation">-</span> https<span class="token punctuation">:</span>//bo.example.com
        <span class="token punctuation">-</span> https<span class="token punctuation">:</span>//search.example.com
      <span class="token key atrule">category</span><span class="token punctuation">:</span>
        <span class="token key atrule">id</span><span class="token punctuation">:</span> dev
        <span class="token key atrule">label</span><span class="token punctuation">:</span> Develop installations
</code></pre></div><p>Note, that <code>list:hosts</code> will show only the first <code>publicUrl</code>. But you can run
<code>phab list:hosts -v</code> to get a more verbose output with all urls and descriptions</p> <p>Example output:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ phab list:hosts

List of found host-configurations:
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span>

Local installations
-------------------
* <span class="token builtin class-name">local</span>  https://localhost

Develop installations
---------------------
* someDevInstance  https://web.example.com
</code></pre></div></li> <li><p>New methods for handling database tasks (importing or exporting a dump) added:</p> <ul><li><code>mysql</code></li> <li><code>sqlite</code></li></ul> <p>The functionality was moved out from the <code>drush</code>-method and replaced by the new
methods.</p> <p>Database credentials will be obtained automatically if not part of the cofiguration
e.g. from drush or environment-variables/ the .env-file for laravel-based projects</p></li> <li><p>New command <code>artisan</code> and new method <code>laravel</code> for laravel-based projects. Just
run e.g. <code>phab -cyourconfig artisan db:seed</code></p></li> <li><p>Add support for global <code>artisanTasks</code></p></li> <li><p>Methods can declare dependencies to other methods, e.g. using the method <code>drush</code>
will implicitely use method <code>mysql</code> if not stated differently in <code>needs</code>.</p></li> <li><p>Allow users to override rsync options via the <code>rsyncOptions</code> settings, e.g.</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">rsyncOptions</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token punctuation">-</span><span class="token punctuation">-</span>delete
</code></pre></div></li> <li><p>You can now scaffold your docker configuration before running any docker-related
command e.g. <code>docker</code> or <code>docker-compose</code>. That means you can scaffold the
corresponding <code>docker-compose.yml</code> or <code>docker-compose.override.yml</code> before running
a command against the config. An example:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">hosts</span><span class="token punctuation">:</span>
  <span class="token key atrule">example</span><span class="token punctuation">:</span>
    <span class="token key atrule">docker</span><span class="token punctuation">:</span>
      <span class="token key atrule">scaffold</span><span class="token punctuation">:</span>
        <span class="token key atrule">assets</span><span class="token punctuation">:</span>
          <span class="token punctuation">-</span> templates/docker<span class="token punctuation">-</span>compose.yml
          <span class="token punctuation">-</span> templates/docker<span class="token punctuation">-</span>compose.override.yml
</code></pre></div><p>This will copy the two files in <code>templates</code> into the root-folder and apply any
configuration from the host <code>example</code> before copying it to the destination.</p> <ul><li>new <code>db</code>-command with subcommands <code>install</code> and <code>drop</code>, allows you to create
or drop a database.</li> <li>option <code>--skip-drop-db</code> for <code>copy-from</code> and <code>restore:sql-from-file</code> to not
drop the table before running the import</li> <li>option <code>--skip-reset</code> for <code>copy-from</code> which will not run the reset-task after
the import.</li></ul></li></ul> <h3 id="changed"><a href="#changed" class="header-anchor">#</a> Changed</h3> <ul><li>Refactor how script-callbacks are handled internally, use a more oo-style</li> <li>Moved all db related functinality out of <code>drush</code> into the methods <code>mysql</code>
and <code>sqlite</code></li> <li>Tests do not depend on the current working directory anymore and clean up after themselves.</li> <li>Refactor script execution to allow lazy validated replacements</li> <li>Fix unresolved replacement patterns in DockerMethod</li> <li>Allow artisan tasks to be configured</li></ul> <h2 id="_3-6-16-2021-09-23"><a href="#_3-6-16-2021-09-23" class="header-anchor">#</a> 3.6.16 / 2021-09-23</h2> <h3 id="fixed"><a href="#fixed" class="header-anchor">#</a> Fixed:</h3> <ul><li>Fix stuck drush deploy:hook</li></ul> <h2 id="_3-6-15-2021-08-04"><a href="#_3-6-15-2021-08-04" class="header-anchor">#</a> 3.6.15 / 2021-08-04</h2> <h3 id="fixed-2"><a href="#fixed-2" class="header-anchor">#</a> Fixed:</h3> <ul><li>Harden the way how phab determines the current running pod</li></ul> <h2 id="_3-6-14-2021-07-01"><a href="#_3-6-14-2021-07-01" class="header-anchor">#</a> 3.6.14 / 2021-07-01</h2> <h3 id="fixed-3"><a href="#fixed-3" class="header-anchor">#</a> Fixed:</h3> <ul><li>Fix <code>copy-from db</code> for <code>dockerExecOverSsh</code>-shells, fixes #175</li> <li>Fix <code>get:file</code> and <code>put:file</code> for <code>dockerExecOverSsh</code> on Mac OS</li></ul> <h2 id="_3-6-13-2021-07-01"><a href="#_3-6-13-2021-07-01" class="header-anchor">#</a> 3.6.13 / 2021-07-01</h2> <h3 id="new-3"><a href="#new-3" class="header-anchor">#</a> New:</h3> <ul><li>Enable copy-from with kubernetes pod as target as long the source is reachable via SSH
and a ssh-connection can be established between the pod and the data-source.</li></ul> <h2 id="_3-6-12-2021-06-30"><a href="#_3-6-12-2021-06-30" class="header-anchor">#</a> 3.6.12 / 2021-06-30</h2> <h3 id="fixed-4"><a href="#fixed-4" class="header-anchor">#</a> Fixed:</h3> <ul><li>Fix getFile for docker-exec-over-ssh shell provider</li> <li>Update multibasebox setup for workspace command</li> <li>Cleanup kube-folder before scaffolding. Fixes #161</li></ul> <h2 id="_3-6-11-2021-06-01"><a href="#_3-6-11-2021-06-01" class="header-anchor">#</a> 3.6.11 / 2021-06-01</h2> <h3 id="fixed-5"><a href="#fixed-5" class="header-anchor">#</a> Fixed:</h3> <ul><li>Fix blueprint template variable <code>slug.with-hyphens.without-prefix</code></li> <li>Bump dns-packet from 1.3.1 to 1.3.4</li> <li>Bump browserslist from 4.16.3 to 4.16.6</li> <li>Update copy action docs</li></ul> <h2 id="_3-6-10-2021-05-20"><a href="#_3-6-10-2021-05-20" class="header-anchor">#</a> 3.6.10 / 2021-05-20</h2> <h3 id="fixed-6"><a href="#fixed-6" class="header-anchor">#</a> Fixed:</h3> <ul><li>Better error handling for version check</li> <li>Fix broken <code>isTerminated()</code></li> <li>Use github actions for creating automatic releases</li> <li>Run php unit tests in github actions</li></ul> <h2 id="_3-6-9-2021-05-19"><a href="#_3-6-9-2021-05-19" class="header-anchor">#</a> 3.6.9 / 2021-05-19</h2> <h3 id="fixed-7"><a href="#fixed-7" class="header-anchor">#</a> Fixed:</h3> <ul><li>Fix missing method in DryRunShellProvider, add test coverage</li></ul> <h2 id="_3-6-8-2021-05-19"><a href="#_3-6-8-2021-05-19" class="header-anchor">#</a> 3.6.8 / 2021-05-19</h2> <h3 id="fixed-8"><a href="#fixed-8" class="header-anchor">#</a> Fixed:</h3> <ul><li>Terminate current shell, when new app gets deployed via k8s</li></ul> <h2 id="_3-6-7-2021-05-19"><a href="#_3-6-7-2021-05-19" class="header-anchor">#</a> 3.6.7 / 2021-05-19</h2> <h3 id="changed-2"><a href="#changed-2" class="header-anchor">#</a> Changed:</h3> <ul><li>Make secret-gathering more verbose, support for multiple 1password-connect-tokens (Fixes #156)</li></ul> <h2 id="_3-6-6-2021-05-13"><a href="#_3-6-6-2021-05-13" class="header-anchor">#</a> 3.6.6 / 2021-05-13</h2> <h3 id="new-4"><a href="#new-4" class="header-anchor">#</a> New:</h3> <ul><li>Allow passing of 1password JWT token via environment variable</li> <li>Add support for hidden questions (e.g. for passwords)</li> <li>Add option <code>forceConfigurationManagement</code> for cases where phab cant detect it properly</li></ul> <h3 id="changed-3"><a href="#changed-3" class="header-anchor">#</a> Changed:</h3> <ul><li>Set new default for configurationManagement</li> <li>If there's an error with 1password cli or connect, display error, but continue</li></ul> <h2 id="_3-6-5-2021-05-11"><a href="#_3-6-5-2021-05-11" class="header-anchor">#</a> 3.6.5 / 2021-05-11</h2> <h3 id="new-5"><a href="#new-5" class="header-anchor">#</a> New:</h3> <ul><li>Support for <a href="https://support.1password.com/secrets-automation/" target="_blank" rel="noopener noreferrer">1password connect<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, see updated docs.</li></ul> <h3 id="fixed-9"><a href="#fixed-9" class="header-anchor">#</a> Fixed:</h3> <ul><li>Fix jira command (fixes #155)</li> <li>Use the pod-template-hash to get the actual running pod, instead of any pod (Fixes #153)</li> <li>Better error messages and throw an exception if a secret could not be retreived</li></ul> <h2 id="_3-6-4-2021-04-30"><a href="#_3-6-4-2021-04-30" class="header-anchor">#</a> 3.6.4 / 2021-04-30</h2> <p>###Fixed:</p> <ul><li>Fix relative inherits from remote and using <code>@</code> (Fixes #150)</li> <li>Update app:scaffold docs</li></ul> <h2 id="_3-6-3-2021-04-15"><a href="#_3-6-3-2021-04-15" class="header-anchor">#</a> 3.6.3 / 2021-04-15</h2> <h3 id="changed-4"><a href="#changed-4" class="header-anchor">#</a> Changed:</h3> <ul><li>Set hostconfig for subsequent commands in artifact based deployments</li> <li>Use dot-notation to define the data to use when altering files</li> <li>Add configBaseFolder configuration option to override the config base folder name</li> <li>Add support for storing secrets in .env file</li> <li>Add support for named scripts (from the scripts section) in artifact based deployment</li></ul> <h3 id="fixed-10"><a href="#fixed-10" class="header-anchor">#</a> Fixed:</h3> <ul><li>Fix bug in escaping replacement patterns</li> <li>Pass secrets to subsequent calls via execute callback</li> <li>Save cloned hostconfig when running artifact based deployment, so execute callback works on latest data</li></ul> <h2 id="_3-6-2-2021-04-14"><a href="#_3-6-2-2021-04-14" class="header-anchor">#</a> 3.6.2 / 2021-04-14</h2> <h3 id="fixes-13"><a href="#fixes-13" class="header-anchor">#</a> Fixes</h3> <ul><li>Allow multiple secrets in one line</li></ul> <h2 id="_3-6-1-2021-04-14"><a href="#_3-6-1-2021-04-14" class="header-anchor">#</a> 3.6.1 / 2021-04-14</h2> <h3 id="fixes-14"><a href="#fixes-14" class="header-anchor">#</a> Fixes</h3> <ul><li>Fixing parsing error #145</li> <li>Set base-url from scaffold-file as a fallback (fixes #144)</li></ul> <h2 id="_3-6-0-2021-04-07"><a href="#_3-6-0-2021-04-07" class="header-anchor">#</a> 3.6.0 / 2021-04-07</h2> <p>The easter relase 3.6.0</p> <div class="language- extra-class"><pre class="language-text"><code>      (\(\
     (='.')
    o(_&quot;)&quot;)
</code></pre></div><h3 id="new-in-this-release-from-the-changelog-of-the-beta-releases"><a href="#new-in-this-release-from-the-changelog-of-the-beta-releases" class="header-anchor">#</a> New in this release (from the changelog of the beta releases):</h3> <ul><li>offsite backups via new <code>restic</code>-method</li> <li>Introduce new secrets mechanims to retrieve secrets from the outside</li> <li>Refactor app:create and app:destroy, add implementation for k8s</li> <li>Allow prefixing paths for inheritsFrom with <code>@</code> and introduce <code>inheritanceBaseUrl</code> to set a common base path</li> <li>Implement base url mechanism for scaffolds</li> <li>Allow inheritance in blueprints using <code>blueprintInheritsFrom</code></li></ul> <h2 id="_3-6-0-beta-9-2021-04-06"><a href="#_3-6-0-beta-9-2021-04-06" class="header-anchor">#</a> 3.6.0-beta.9 / 2021-04-06</h2> <h3 id="fixed-11"><a href="#fixed-11" class="header-anchor">#</a> Fixed:</h3> <ul><li>Add restic sftp host to known hosts automatically</li> <li>Throw an error instead of asking for a ssh password, can be overriden, if needed (Fixes #142)</li> <li>Update dependencies</li></ul> <h2 id="_3-6-0-beta-8-2021-04-06"><a href="#_3-6-0-beta-8-2021-04-06" class="header-anchor">#</a> 3.6.0-beta.8 / 2021-04-06</h2> <h3 id="new-6"><a href="#new-6" class="header-anchor">#</a> New:</h3> <ul><li>Allow user to provide tar-options for <code>get:files-dump</code> (Fixes #138)</li> <li>Add new option for <code>put:file</code> to set the destination for the file copy. (Fixes #137)</li> <li>Allow <code>computedValues</code> also for scaffold scripts</li></ul> <h2 id="_3-6-0-beta-7-2021-03-29"><a href="#_3-6-0-beta-7-2021-03-29" class="header-anchor">#</a> 3.6.0-beta.7 / 2021-03-29</h2> <h3 id="new-7"><a href="#new-7" class="header-anchor">#</a> New:</h3> <ul><li>Allow user to provide tar-options for <code>get:files-dump</code> (Fixes #138)</li> <li>Add new option for <code>put:file</code> to set the destination for the file copy. (Fixes #137)</li> <li>Allow <code>computedValues</code> also for scaffold scripts</li></ul> <h2 id="_3-6-0-beta-6-2021-03-25"><a href="#_3-6-0-beta-6-2021-03-25" class="header-anchor">#</a> 3.6.0-beta.6 / 2021-03-25</h2> <h3 id="fixes-15"><a href="#fixes-15" class="header-anchor">#</a> Fixes:</h3> <ul><li>Try to replace patterns in strings only, fixes #141</li> <li>Remove double --namespace from k8s methods</li></ul> <h2 id="_3-6-0-beta-5-2021-03-24"><a href="#_3-6-0-beta-5-2021-03-24" class="header-anchor">#</a> 3.6.0-beta.5 / 2021-03-24</h2> <h3 id="fixed-12"><a href="#fixed-12" class="header-anchor">#</a> Fixed:</h3> <ul><li>Allow replacements for <code>alter_file_*</code> callbacks</li></ul> <h2 id="_3-6-0-beta-4-2021-03-24"><a href="#_3-6-0-beta-4-2021-03-24" class="header-anchor">#</a> 3.6.0-beta.4 / 2021-03-24</h2> <h3 id="fixes-16"><a href="#fixes-16" class="header-anchor">#</a> Fixes:</h3> <ul><li>Fix overridden data when executing scaffolds in scaffolds, pass options down the lane</li> <li>Resolve secrets before executing a command</li></ul> <h2 id="_3-6-0-beta-3-2021-03-24"><a href="#_3-6-0-beta-3-2021-03-24" class="header-anchor">#</a> 3.6.0-beta.3 / 2021-03-24</h2> <h3 id="fixed-13"><a href="#fixed-13" class="header-anchor">#</a> Fixed:</h3> <ul><li>Disable quiet for scaffold callback to allow questions to be shown</li></ul> <h2 id="_3-6-0-beta-2-2021-03-24"><a href="#_3-6-0-beta-2-2021-03-24" class="header-anchor">#</a> 3.6.0-beta.2 / 2021-03-24</h2> <h3 id="fixed-14"><a href="#fixed-14" class="header-anchor">#</a> Fixed:</h3> <ul><li>Remove dead code</li> <li>Use release version when checking <code>requires</code></li> <li>Fix fatal on startup, fixes #136</li> <li>Fix for backups w/o git hash</li></ul> <h2 id="_3-6-0-beta-1-2021-03-23"><a href="#_3-6-0-beta-1-2021-03-23" class="header-anchor">#</a> 3.6.0-beta.1 / 2021-03-23</h2> <h3 id="new-8"><a href="#new-8" class="header-anchor">#</a> New:</h3> <ul><li>Initial implementation of doing backups via restic</li> <li>Implement list:backups and restore for restic. Initial support for other backup methods implemented</li> <li>Introduce new secrets mechanims to retrieve secrets from the outside</li> <li>Refactor app:create and app:destroy, add implementation for k8s</li> <li>Add new way of handling secrets via new replacement pattern</li> <li>Support for password-only fields from 1password</li> <li>Resolve secrets for scripts</li> <li>Resolve secrets on demand, prevents prompts for secrets for unrelated commands</li> <li>Allow prefixing paths for inheritsFrom with <code>@</code> and introduce <code>inheritanceBaseUrl</code> to set a common base path</li> <li>Implement base url mechanism for scaffolds</li> <li>Add option to scaffold-commands to provide a base url for scaffolders</li> <li>Allow inheritance in blueprints using <code>blueprintInheritsFrom</code></li></ul> <h3 id="changed-5"><a href="#changed-5" class="header-anchor">#</a> Changed:</h3> <ul><li>Update dependencies, support composer 2</li> <li>Refactor backup related code, move common code into base class</li> <li>Show an error message for <code>copy-from files</code> where source or destination does not support rsync (e.g. docker-exec, kubectl)</li> <li>Add deprecation message for ftp-passwords</li></ul> <h3 id="fixed-15"><a href="#fixed-15" class="header-anchor">#</a> Fixed:</h3> <ul><li>Add missing license to composer.json, fixes #132</li> <li>Fix getSQLDump and restoreSqlFromFile tasks</li> <li>When checking for a mysql connection do not consume default config files</li> <li>Enhance error message when inheritsFrom/blueprintInheritsFrom fails</li> <li>Throw an exception when the name of the docker container is missing</li> <li>Require rinnung app for shell-task</li> <li>Fix check for existing app in k8s, better error messages</li></ul> <h2 id="_3-5-36-2021-03-15"><a href="#_3-5-36-2021-03-15" class="header-anchor">#</a> 3.5.36 / 2021-03-15</h2> <h3 id="fixed-16"><a href="#fixed-16" class="header-anchor">#</a> Fixed:</h3> <ul><li>Fix shell command for docker-exec and k8s. Fixes #130</li></ul> <h2 id="_3-5-35-2021-03-14"><a href="#_3-5-35-2021-03-14" class="header-anchor">#</a> 3.5.35 / 2021-03-14</h2> <h3 id="fixed-17"><a href="#fixed-17" class="header-anchor">#</a> Fixed:</h3> <ul><li>Fix <code>getSQLDump</code> and <code>restoreSqlFromFile</code> tasks</li></ul> <h2 id="_3-5-34-2021-03-11"><a href="#_3-5-34-2021-03-11" class="header-anchor">#</a> 3.5.34 / 2021-03-11</h2> <h2 id="new-9"><a href="#new-9" class="header-anchor">#</a> New</h2> <ul><li>new <code>scaffold</code> internal command to run scaffolders from within a scaffolder</li></ul> <h2 id="changed-6"><a href="#changed-6" class="header-anchor">#</a> Changed:</h2> <ul><li>Percentages for replacement patterns can be escaped via <code>\</code> in scripts</li> <li>webhook-urls can contain replacement-patterns</li></ul> <h2 id="_3-5-33-2021-03-04"><a href="#_3-5-33-2021-03-04" class="header-anchor">#</a> 3.5.33 / 2021-03-04</h2> <h2 id="fixed-18"><a href="#fixed-18" class="header-anchor">#</a> Fixed:</h2> <ul><li>Run install from-config only for drush &gt;=9  (fixes #121)</li></ul> <h2 id="_3-5-32-2021-03-01"><a href="#_3-5-32-2021-03-01" class="header-anchor">#</a> 3.5.32 / 2021-03-01</h2> <h3 id="fixed-19"><a href="#fixed-19" class="header-anchor">#</a> Fixed:</h3> <ul><li>Fix regression when restarting containers with cached container name</li></ul> <h2 id="_3-5-31-2021-03-01"><a href="#_3-5-31-2021-03-01" class="header-anchor">#</a> 3.5.31 / 2021-03-01</h2> <h3 id="new-10"><a href="#new-10" class="header-anchor">#</a> New</h3> <ul><li>Initial implementation of new command <code>docker-compose</code></li> <li>Rework docker-compose command so it can be run interactively</li> <li>Introduce isRunningAppRequired, to exit early if not the case</li> <li>Add support for <code>deploy</code>-command from drush 10.3 (fixes #106)</li> <li>Check target repository for new commits and show a warning (fixes  #124)</li></ul> <h3 id="changed-7"><a href="#changed-7" class="header-anchor">#</a> Changed</h3> <ul><li>Use same deploy strategy as drush</li> <li>Add drush cr after updb to mimic drush deploy</li></ul> <h3 id="fixed-20"><a href="#fixed-20" class="header-anchor">#</a> Fixed</h3> <ul><li>Fix broken caching of remote resources</li> <li>Show error message for <code>phab shell</code>, fixes #122</li></ul> <h2 id="_3-5-30-2021-01-27"><a href="#_3-5-30-2021-01-27" class="header-anchor">#</a> 3.5.30 / 2021-01-27</h2> <h3 id="added"><a href="#added" class="header-anchor">#</a> Added:</h3> <ul><li>Add gitOptions to git-artifact deployment to change the actual git clone command</li></ul> <h2 id="_3-5-29-2021-01-21"><a href="#_3-5-29-2021-01-21" class="header-anchor">#</a> 3.5.29 / 2021-01-21</h2> <h3 id="fixed-21"><a href="#fixed-21" class="header-anchor">#</a> Fixed:</h3> <ul><li>Throw an exception when drush cim fails</li></ul> <h2 id="_3-5-28-2021-01-15"><a href="#_3-5-28-2021-01-15" class="header-anchor">#</a> 3.5.28 / 2021-01-15</h2> <h3 id="new-11"><a href="#new-11" class="header-anchor">#</a> New:</h3> <ul><li>New callbacks for scripts and scaffolders, <code>set_directory</code> and <code>alter_yaml_file</code></li></ul> <h3 id="changed-8"><a href="#changed-8" class="header-anchor">#</a> Changed:</h3> <ul><li>Switch to github branching strategy</li> <li><code>install</code> will try to use existing configuration when available</li> <li>Bump ini from 1.3.5 to 1.3.8</li> <li>Make getting data over http more robust, add tests for it</li> <li>Scaffolder: Allow merge of numerical and associative arrays</li> <li>Scaffolder: Sort actions by key before processing them</li> <li>Scaffolder: Remove default actions</li> <li>Install: Fix bug in detection of correctly setup configuration management</li> <li>Install: Fix install without config by setting context result.</li> <li>Install: Add --existing-config command option to drush site-install if config sync dir contains existing configuration.</li></ul> <h2 id="_3-5-27-2020-11-12"><a href="#_3-5-27-2020-11-12" class="header-anchor">#</a> 3.5.27 / 2020-11-12</h2> <h3 id="fixed-22"><a href="#fixed-22" class="header-anchor">#</a> Fixed:</h3> <ul><li>Allow merge of numerical and associative arrays</li></ul> <h2 id="_3-5-26-2020-11-12"><a href="#_3-5-26-2020-11-12" class="header-anchor">#</a> 3.5.26 / 2020-11-12</h2> <h3 id="fixed-23"><a href="#fixed-23" class="header-anchor">#</a> Fixed:</h3> <ul><li>Revert change to mergeData, add test coverage for it</li></ul> <h2 id="_3-5-25-2020-11-12"><a href="#_3-5-25-2020-11-12" class="header-anchor">#</a> 3.5.25 / 2020-11-12</h2> <h3 id="changed-9"><a href="#changed-9" class="header-anchor">#</a> Changed:</h3> <ul><li>Sort actions by key before processing them</li> <li>Remove default actions</li></ul> <h2 id="_3-5-24-2020-11-06"><a href="#_3-5-24-2020-11-06" class="header-anchor">#</a> 3.5.24 / 2020-11-06</h2> <h3 id="fixed-24"><a href="#fixed-24" class="header-anchor">#</a> Fixed:</h3> <ul><li>Provide default value for <code>alterSettingsFile</code> property</li></ul> <h2 id="_3-5-23-2020-11-06"><a href="#_3-5-23-2020-11-06" class="header-anchor">#</a> 3.5.23 / 2020-11-06</h2> <h3 id="fixed-25"><a href="#fixed-25" class="header-anchor">#</a> Fixed:</h3> <ul><li>Fix file copying for kubectl shells</li> <li>Enhance docs for git based artifact deployment</li> <li>Apply shellProviderOptions also to other ssh commands</li> <li>Fix shell creation for ssh when executed as a sub process, typos</li></ul> <h3 id="new-12"><a href="#new-12" class="header-anchor">#</a> New:</h3> <ul><li>Add new artifact actions <code>log</code> and <code>message</code> (Fixes #109)</li></ul> <h2 id="_3-5-22-2020-10-18"><a href="#_3-5-22-2020-10-18" class="header-anchor">#</a> 3.5.22 / 2020-10-18</h2> <h3 id="fixed-26"><a href="#fixed-26" class="header-anchor">#</a> Fixed:</h3> <ul><li>Fix error in scaffolder which prevented to ask for the project name</li> <li>Try to prevent timeouts when using k8s</li> <li>Set tty flag for new shells</li></ul> <h3 id="changed-10"><a href="#changed-10" class="header-anchor">#</a> Changed:</h3> <ul><li>Refactor how scripts and scaffolders handle callbacks</li> <li>Enhance argument parsing, updated test-coverage</li> <li>Allow <code>inheritsFrom</code> with absolute file names</li> <li>Update vuepress</li> <li>Refactor how options are passed to the shell-provider.</li></ul> <h2 id="_3-5-21-2020-10-11"><a href="#_3-5-21-2020-10-11" class="header-anchor">#</a> 3.5.21 / 2020-10-11</h2> <h3 id="fixed-27"><a href="#fixed-27" class="header-anchor">#</a> Fixed:</h3> <ul><li>Fix regression with <code>get:file</code>, <code>put:file</code> and <code>copy-from</code></li></ul> <h2 id="_3-5-20-2020-10-11"><a href="#_3-5-20-2020-10-11" class="header-anchor">#</a> 3.5.20 / 2020-10-11</h2> <h3 id="new-13"><a href="#new-13" class="header-anchor">#</a> New:</h3> <ul><li>Add new option <code>alterSettingsFile</code> which defaults to true</li></ul> <h3 id="changed-11"><a href="#changed-11" class="header-anchor">#</a> Changed:</h3> <ul><li>Allow inheritance to merge arrays if one of them is associative</li></ul> <h2 id="_3-5-19-2020-10-09"><a href="#_3-5-19-2020-10-09" class="header-anchor">#</a> 3.5.19 / 2020-10-09</h2> <h3 id="fixed-28"><a href="#fixed-28" class="header-anchor">#</a> Fixed:</h3> <ul><li>Reset auto-discovered docker name after docker-tasks to prevent outdated information</li> <li>Show proper error-message if a remote asset cant be loaded</li></ul> <h2 id="_3-5-18-2020-10-07"><a href="#_3-5-18-2020-10-07" class="header-anchor">#</a> 3.5.18 / 2020-10-07</h2> <h3 id="fixes-17"><a href="#fixes-17" class="header-anchor">#</a> Fixes:</h3> <ul><li>Provide sensible defaults for <code>podSelector</code>, fix a warning</li> <li>Add test-coverage for most shell-providers, fixes #104</li></ul> <h2 id="_3-5-17-2020-10-01"><a href="#_3-5-17-2020-10-01" class="header-anchor">#</a> 3.5.17 / 2020-10-01</h2> <h3 id="breaking-change"><a href="#breaking-change" class="header-anchor">#</a> Breaking change:</h3> <ul><li><p>Provide a more secure password for dev-instances. This will change the admin
password of your dev-instances as the default passwords got replaced with a more secure variant.</p> <p>You can get the admin-password for a given instance via <code>phab -c&lt;config&gt; get:property adminPass</code>.</p> <p>Or you can override the <code>adminPass</code> in the fabfile globally or on a per host-basis. Another option
for local development is creating a <code>fabfile.local.override.yaml</code> in your multibasebox folder and
change its content to sth like this</p> <div class="language- extra-class"><pre class="language-text"><code>hosts:
  mbb:
    adminPass: admin
</code></pre></div></li></ul> <h2 id="_3-5-16-2020-09-27"><a href="#_3-5-16-2020-09-27" class="header-anchor">#</a> 3.5.16 / 2020-09-27</h2> <h3 id="fixes-18"><a href="#fixes-18" class="header-anchor">#</a> Fixes:</h3> <ul><li>Fix kubernetes get-file and put-file task.</li> <li>Update readme and document how to create a release and publish the docs</li> <li>Update vuepress</li></ul> <h2 id="_3-5-15-2020-09-18"><a href="#_3-5-15-2020-09-18" class="header-anchor">#</a> 3.5.15 / 2020-09-18</h2> <h3 id="fixes-19"><a href="#fixes-19" class="header-anchor">#</a> Fixes:</h3> <ul><li>Remove <code>-q</code> option from ssh command as this prevents sshs error reporting</li></ul> <h3 id="new-14"><a href="#new-14" class="header-anchor">#</a> New:</h3> <ul><li>Provide computed property <code>kubectlOptionsCombined</code> for use in scripts to use the same cli-options as phab does</li></ul> <h2 id="_3-5-14-2020-09-16"><a href="#_3-5-14-2020-09-16" class="header-anchor">#</a> 3.5.14 / 2020-09-16</h2> <h3 id="fixed-29"><a href="#fixed-29" class="header-anchor">#</a> Fixed:</h3> <ul><li><code>execute()</code> will now properly respect breakOnFirstError which got ignored in the past</li> <li>Fix docs regarding <code>log_message</code> (Fixes #100)</li></ul> <h2 id="_3-5-13-2020-09-15"><a href="#_3-5-13-2020-09-15" class="header-anchor">#</a> 3.5.13 / 2020-09-15</h2> <h3 id="new-15"><a href="#new-15" class="header-anchor">#</a> New:</h3> <ul><li>Allow script question values to be overridden via <code>--arguments</code></li> <li>Add tests for scaffold command</li> <li>Allow questions for scripts</li> <li>Allow computedValues for scripts, this will allow the user to eecute external commands and reuse their results.</li> <li><code>log_message</code> supported for scripts</li> <li><code>confirm(message)</code> supported for scaffolder and scripts.</li> <li>Enhance parsing of arguments for internal commands when used in the scaffolder or script. This is now possible: <code>log_message(&quot;hello, dear user! Welcome!&quot;, &quot;success&quot;)</code></li></ul> <h3 id="changed-12"><a href="#changed-12" class="header-anchor">#</a> Changed</h3> <ul><li>HostConfigs with <code>inheritOnly</code> wont be listed when running <code>list:hosts</code></li> <li>The scaffolder will use/ create a token-cache file only when requested with <code>--use-cached-tokens</code></li></ul> <h2 id="_3-5-12-2020-09-09"><a href="#_3-5-12-2020-09-09" class="header-anchor">#</a> 3.5.12 / 2020-09-09</h2> <h3 id="new-16"><a href="#new-16" class="header-anchor">#</a> New:</h3> <ul><li>Implement <code>start-remote-access</code> for k8s</li></ul> <h3 id="fixed-30"><a href="#fixed-30" class="header-anchor">#</a> Fixed:</h3> <ul><li>Remove fragile context handling in k8s, instead use dedicated command-line argument</li></ul> <h2 id="_3-5-11-2020-09-08"><a href="#_3-5-11-2020-09-08" class="header-anchor">#</a> 3.5.11 / 2020-09-08</h2> <h3 id="new-17"><a href="#new-17" class="header-anchor">#</a> New:</h3> <ul><li>Add support for .env files on the same level as the .fabfile. Will be included in global scope under the key <code>environment</code></li></ul> <h3 id="fixed-31"><a href="#fixed-31" class="header-anchor">#</a> Fixed:</h3> <ul><li>Forget cached <code>podForCli</code> after deployment to acquire a new one, add <code>settings</code> to the replaceents</li> <li>Update dependencies</li></ul> <h2 id="_3-5-10-2020-09-08"><a href="#_3-5-10-2020-09-08" class="header-anchor">#</a> 3.5.10 / 2020-09-08</h2> <h3 id="new-18"><a href="#new-18" class="header-anchor">#</a> New:</h3> <ul><li>Add <code>assert_file</code> internal command for scaffold-scripts to check if a specific file exists.</li></ul> <h3 id="fixed-32"><a href="#fixed-32" class="header-anchor">#</a> Fixed:</h3> <ul><li>Silence ssh process a bit more, might fix #98</li> <li>Proper parsing and applying of single quotes to commands. Fixes #81</li> <li>If no tty is requested do not attach stdin to process, so it wont wait for input. Fixes #98</li> <li>Bump symfony/http-kernel from 4.4.7 to 4.4.13</li></ul> <h2 id="_3-5-9-2020-08-31"><a href="#_3-5-9-2020-08-31" class="header-anchor">#</a> 3.5.9 / 2020-08-31</h2> <h3 id="fixed-33"><a href="#fixed-33" class="header-anchor">#</a> Fixed:</h3> <ul><li>Fix wrong npmRootFolder when using artifact based deployment, modularize the logic</li></ul> <h2 id="_3-5-8-2020-08-26"><a href="#_3-5-8-2020-08-26" class="header-anchor">#</a> 3.5.8 / 2020-08-26</h2> <h2 id="fixed-34"><a href="#fixed-34" class="header-anchor">#</a> Fixed:</h2> <ul><li>Revert newly introduced idle-prevention when running scripts as it breaks execution under certain circumstances</li></ul> <h2 id="_3-5-7-2020-08-25"><a href="#_3-5-7-2020-08-25" class="header-anchor">#</a> 3.5.7 / 2020-08-25</h2> <h3 id="new-19"><a href="#new-19" class="header-anchor">#</a> New:</h3> <ul><li>Do pattern replacement dynamically for k8s</li> <li>Rework kubectl execution, you can now add options to the command and set a dedicated kubeconfig in the fabfile</li></ul> <h3 id="fixed-35"><a href="#fixed-35" class="header-anchor">#</a> Fixed:</h3> <ul><li>Fix broken workspace:create and workspace:update commands due to recent refactoring. Add test coverage for both commands</li> <li>Refactor tunnel creation into dedicated classes and helpers</li></ul> <h2 id="_3-5-6-2020-08-22"><a href="#_3-5-6-2020-08-22" class="header-anchor">#</a> 3.5.6 / 2020-08-22</h2> <h3 id="new-20"><a href="#new-20" class="header-anchor">#</a> New:</h3> <ul><li>Allow to set environment variables in the kubectl context, e.g for KUBECONFIG</li></ul> <h3 id="fixes-20"><a href="#fixes-20" class="header-anchor">#</a> Fixes:</h3> <ul><li>Make sure that drush operates in the correct sitefolder when pulling or pushing variables</li> <li>Smaller doc fixes</li></ul> <h2 id="_3-5-5-2020-08-18"><a href="#_3-5-5-2020-08-18" class="header-anchor">#</a> 3.5.5 / 2020-08-18</h2> <h3 id="new-21"><a href="#new-21" class="header-anchor">#</a> New:</h3> <ul><li>Add support for switching context before running kubectl</li></ul> <h2 id="_3-5-4-2020-08-17"><a href="#_3-5-4-2020-08-17" class="header-anchor">#</a> 3.5.4 / 2020-08-17</h2> <h3 id="new-22"><a href="#new-22" class="header-anchor">#</a> New:</h3> <ul><li>Allow optional script context definition of a script, this will allow to execute the script in a different context, eg in the context of the kubectl shell</li></ul> <h2 id="_3-5-3-2020-08-11"><a href="#_3-5-3-2020-08-11" class="header-anchor">#</a> 3.5.3 / 2020-08-11</h2> <h2 id="fixed-36"><a href="#fixed-36" class="header-anchor">#</a> Fixed:</h2> <ul><li>Fix broken workspace:create and workspace:update commands due to recent refactoring. Add test coverage for both commands</li></ul> <h2 id="_3-5-2-2020-08-07"><a href="#_3-5-2-2020-08-07" class="header-anchor">#</a> 3.5.2 / 2020-08-07</h2> <h3 id="fixed-37"><a href="#fixed-37" class="header-anchor">#</a> Fixed:</h3> <ul><li>Chunk regex patterns to prevent warning and failing replacements</li> <li>Provide default command result</li></ul> <h2 id="_3-5-1-2020-08-04"><a href="#_3-5-1-2020-08-04" class="header-anchor">#</a> 3.5.1 / 2020-08-04</h2> <h3 id="fixed-38"><a href="#fixed-38" class="header-anchor">#</a> Fixed:</h3> <ul><li>Fix a warning when running scaffold without scripts</li> <li>Force-include twig dependencies when building phar</li></ul> <h2 id="_3-5-0-2020-08-04"><a href="#_3-5-0-2020-08-04" class="header-anchor">#</a> 3.5.0 / 2020-08-04</h2> <h3 id="fixed-39"><a href="#fixed-39" class="header-anchor">#</a> Fixed:</h3> <ul><li>Fix error in fallback version check, fixes #93</li></ul> <h3 id="new-23"><a href="#new-23" class="header-anchor">#</a> New:</h3> <ul><li>Support for kubernetes, see documentation for more details. Some features still missing.</li> <li>Add describe subcommand for k8s</li> <li>Add logs subcommand for k8s</li> <li>Implement copy operation for k8s</li> <li>Add docs for kubernetes, fix test</li> <li>Allow the passing of a shellprovider to the scaffolder, reorganize code a little bit</li> <li>Add new k8s subcommand rollout, wait for deployments to finish before continuing</li> <li>Apply kubernetes config on deploy, even when scaffolder is not used, smaller code enhancements</li> <li>Rename deployCommand to applyCommand, add delete subcommand to k8s method</li> <li>Add new option <code>set</code> which allows to set a certain value in the configuration</li> <li>Provide host data and timestamp for scaffolder</li> <li>Add kubectl shellprovider, fix some bugs in K8sMethod</li> <li>Add k8s subcommands</li> <li>Implement initial deploy command for k8s</li> <li>Fix replacements in k8s</li> <li>Start working on k8s method, refactoring scaffold functionality into dedicated class with dedicated options class</li> <li>Bump elliptic from 6.5.2 to 6.5.3</li> <li>Bump lodash from 4.17.15 to 4.17.19</li> <li>Disable symfony recipes</li> <li>Show available update even on linux</li></ul> <h2 id="_3-4-9-2020-07-24"><a href="#_3-4-9-2020-07-24" class="header-anchor">#</a> 3.4.9 / 2020-07-24</h2> <h3 id="fixed-40"><a href="#fixed-40" class="header-anchor">#</a> Fixed:</h3> <ul><li>Harden the extraction of return codes for executed commands</li></ul> <h2 id="_3-4-8-2020-07-16"><a href="#_3-4-8-2020-07-16" class="header-anchor">#</a> 3.4.8 / 2020-07-16</h2> <h3 id="fixed-41"><a href="#fixed-41" class="header-anchor">#</a> Fixed:</h3> <ul><li>Clean up any cached docker container name after a task got executed. Fixes #89</li> <li>Add php codesniffer as dev dependency</li> <li>Show available update even on linux</li></ul> <h2 id="_3-4-7-2020-06-29"><a href="#_3-4-7-2020-06-29" class="header-anchor">#</a> 3.4.7 / 2020-06-29</h2> <h3 id="fixed-42"><a href="#fixed-42" class="header-anchor">#</a> Fixed:</h3> <ul><li>Fix ensureKnownHosts</li></ul> <h2 id="_3-4-6-2020-06-29"><a href="#_3-4-6-2020-06-29" class="header-anchor">#</a> 3.4.6 / 2020-06-29</h2> <h3 id="fixed-43"><a href="#fixed-43" class="header-anchor">#</a> Fixed:</h3> <ul><li>Ensure known hosts for ssh shells, some refactoring</li> <li>Fix smaller bugs in scaffolder</li> <li>Bump websocket-extensions from 0.1.3 to 0.1.4</li> <li>Throw an exception with the filename if transform plugin throws an exception, improve logging</li></ul> <h3 id="new-24"><a href="#new-24" class="header-anchor">#</a> New:</h3> <ul><li>Refactor Scaffoldbase to use a QuestionFactory with new types of questions</li> <li>Enhance validation service</li> <li>Pass files parameter directly to transformer</li></ul> <h2 id="_3-4-5-2020-05-18"><a href="#_3-4-5-2020-05-18" class="header-anchor">#</a> 3.4.5 / 2020-05-18</h2> <h3 id="fixed-44"><a href="#fixed-44" class="header-anchor">#</a> Fixed:</h3> <ul><li>Fix docker-exec-over-ssh</li></ul> <h2 id="_3-4-4-2020-05-18"><a href="#_3-4-4-2020-05-18" class="header-anchor">#</a> 3.4.4 / 2020-05-18</h2> <h3 id="new-25"><a href="#new-25" class="header-anchor">#</a> New:</h3> <ul><li>New shellprovider: docker-exec-over-ssh, its a concatenated shell running docker-exec on a remote instance</li></ul> <h3 id="fixed-45"><a href="#fixed-45" class="header-anchor">#</a> Fixed:</h3> <ul><li>Prevent folder name collision if two artifact deployements are runing at the same time</li> <li>Fix app:create when using a service for docker ip gathering</li> <li>Fix for inherit loops, fixes #78</li> <li>Allow per host repository settings</li></ul> <h2 id="_3-4-3-2020-04-29"><a href="#_3-4-3-2020-04-29" class="header-anchor">#</a> 3.4.3 / 2020-04-29</h2> <p>##Fixed</p> <ul><li>Previous versions did not check the version constraints of imported yaml files.</li></ul> <h2 id="_3-4-2-2020-04-28"><a href="#_3-4-2-2020-04-28" class="header-anchor">#</a> 3.4.2 / 2020-04-28</h2> <h3 id="new-26"><a href="#new-26" class="header-anchor">#</a> New</h3> <ul><li>Allow per host repository settings</li></ul> <h2 id="_3-4-1-2020-04-25"><a href="#_3-4-1-2020-04-25" class="header-anchor">#</a> 3.4.1 / 2020-04-25</h2> <h3 id="fixed-46"><a href="#fixed-46" class="header-anchor">#</a> Fixed</h3> <ul><li>Fix for non-working plugin autoloader when using bundled as phar</li></ul> <h2 id="_3-4-0"><a href="#_3-4-0" class="header-anchor">#</a> 3.4.0</h2> <h3 id="new-27"><a href="#new-27" class="header-anchor">#</a> New</h3> <ul><li>Support override-mechanism. If a yaml-file with the extension <code>override.yml</code> or <code>override.yaml</code> exists, its data will be merged with the original file.</li> <li>Add ip option to start-remote-access command to connect to a specific host</li> <li>Initial implementation of <code>variable:pull</code> and <code>variable:push</code> for D7 via drush</li> <li>add new command <code>scaffold</code> which allows to scaffold and transform not only apps but also other types of files.</li> <li>Introducing plugin mechanism to add functionality via external php files for the scaffolder. Will be used by <code>phab-entity-scaffolder</code> <ul><li>Use static array of discovered transformers, to fix unit testing, as php does not allow to discover a php-class multiple times</li> <li>Add logging to plugin discovery</li> <li>Fix options with multiple values</li> <li>Implement better approach to find vendor-folder</li> <li>Expose target_path to transformers</li> <li>Make sure, that only yaml files get transformed</li> <li>Use global autoloader, so registering new namespaces are permanent</li> <li>Use autoloader to register plugin classes</li> <li>Refactor scaffold callbacks in dedicated classes, so they can be externally loaded</li> <li>First draft of a plugin mechanism to decouple scaffolding from phabalicious, as an effort to port entityscaffolder to d8</li></ul></li> <li>Support for knownHosts. Setting <code>knownHosts</code> for a host- or dockerHost-configurtion will make sure, that the keys for that hosts are added to the known_hosts-file.</li> <li>Update known_hosts before specific commands, needs possibly more work #70</li></ul> <h3 id="changed-13"><a href="#changed-13" class="header-anchor">#</a> Changed</h3> <ul><li>Remove entity-updates option during drush reset</li> <li>Better error message for missing arguments</li> <li>Refactor task context creation to allow arguments for all commands</li> <li>Upgrade vuepress dependencies</li> <li>Update dependencies</li> <li>Update docs</li></ul> <h3 id="fixed-47"><a href="#fixed-47" class="header-anchor">#</a> Fixed</h3> <ul><li>Satisfy PHP 7.2</li> <li>Document yarnRunContext and npmRunContext</li> <li>Fix regression with script default arguments, added test-case. Fixes  #77</li> <li>Fix exclude action for git artifact deployments #73</li> <li>Fix race condition on app:create</li> <li>Remove deprecated code</li> <li>If the underlying shell terminates with an exit code, throw an exception</li> <li>Use a different name for the target filename to prevent name-clashes</li> <li>Fix version command, nicer output</li></ul> <h2 id="_3-3-5-2020-03-02"><a href="#_3-3-5-2020-03-02" class="header-anchor">#</a> 3.3.5 / 2020-03-02</h2> <h3 id="fixed-48"><a href="#fixed-48" class="header-anchor">#</a> Fixed</h3> <ul><li>limit amount of commit messages to 20 when doing artifacts deployment</li></ul> <h2 id="_3-3-4-2020-01-21"><a href="#_3-3-4-2020-01-21" class="header-anchor">#</a> 3.3.4 / 2020-01-21</h2> <h3 id="fixed-49"><a href="#fixed-49" class="header-anchor">#</a> Fixed</h3> <ul><li>Skip precommit hooks for committing artifacts</li> <li>Silence a warning, if shell exits unexpectedly throw exception only on error</li></ul> <h2 id="_3-3-3-2020-01-15"><a href="#_3-3-3-2020-01-15" class="header-anchor">#</a> 3.3.3 / 2020-01-15</h2> <h3 id="fixed-50"><a href="#fixed-50" class="header-anchor">#</a> Fixed</h3> <ul><li>Add new internal method to modify a json file when scaffolding.</li> <li>New option <code>skipSubfolder</code>, so that scaffold wont create a subfolder.</li> <li>Update vuepress</li></ul> <h2 id="_3-3-1-2020-01-06"><a href="#_3-3-1-2020-01-06" class="header-anchor">#</a> 3.3.1 / 2020-01-06</h2> <h3 id="fixed-51"><a href="#fixed-51" class="header-anchor">#</a> Fixed:</h3> <ul><li>Fixed a bug inheriting the target branch from the source branch</li></ul> <h2 id="_3-3-0-2020-01-03"><a href="#_3-3-0-2020-01-03" class="header-anchor">#</a> 3.3.0 / 2020-01-03</h2> <h3 id="new-28"><a href="#new-28" class="header-anchor">#</a> New:</h3> <ul><li>New command <code>workspace:create</code>, which will run the multibasebox scaffolder</li> <li>Add <code>workspace:update</code> command and refactor scaffold code</li> <li>scaffolder will store tokens in <code>.phab-scaffold-tokens</code> in the scaffolded folder. Subsequent scaffold-runs will load and use these tokens (and do not ask for them)</li> <li>when scaffolding a project the warning that the target folder exists can be suppressed by adding <code>allowOverride: 1</code> to the variables-section.</li> <li>Add coding-style standards config file, apply them.</li></ul> <h2 id="_3-2-15-2019-12-30"><a href="#_3-2-15-2019-12-30" class="header-anchor">#</a> 3.2.15 / 2019-12-30</h2> <h3 id="changed-new"><a href="#changed-new" class="header-anchor">#</a> Changed/ New</h3> <ul><li>Refactor composer command to a base class, so functionality can be shared with new commands yarn and npm</li> <li>Drush will try to run an install, even when no database-settings were found in the current host-config.</li></ul> <h2 id="_3-2-14-2019-12-19"><a href="#_3-2-14-2019-12-19" class="header-anchor">#</a> 3.2.14 / 2019-12-19</h2> <h3 id="fixed-52"><a href="#fixed-52" class="header-anchor">#</a> Fixed:</h3> <ul><li>Add support for Drupal 8.8 and changed behavior regarding config-sync</li></ul> <h2 id="_3-2-13-2019-12-15"><a href="#_3-2-13-2019-12-15" class="header-anchor">#</a> 3.2.13 / 2019-12-15</h2> <h3 id="fixed-53"><a href="#fixed-53" class="header-anchor">#</a> Fixed:</h3> <ul><li>Pass arguments to subsequent commands</li> <li>If a replacement can't be parsed, throw an exception</li></ul> <h2 id="_3-2-12-2019-12-14"><a href="#_3-2-12-2019-12-14" class="header-anchor">#</a> 3.2.12 / 2019-12-14</h2> <h3 id="fixed-54"><a href="#fixed-54" class="header-anchor">#</a> Fixed:</h3> <ul><li>Fix php declaration error</li></ul> <h2 id="_3-2-11-2019-12-14"><a href="#_3-2-11-2019-12-14" class="header-anchor">#</a> 3.2.11 / 2019-12-14</h2> <h3 id="fixed-55"><a href="#fixed-55" class="header-anchor">#</a> Fixed:</h3> <ul><li>Allow arguments for the docker command, merge scripts variables instead of replacing them</li></ul> <h2 id="_3-2-10-2019-12-12"><a href="#_3-2-10-2019-12-12" class="header-anchor">#</a> 3.2.10 / 2019-12-12</h2> <h3 id="fixed-56"><a href="#fixed-56" class="header-anchor">#</a> Fixed:</h3> <ul><li>Fix error when deleting existing files in copyAction</li></ul> <h2 id="_3-2-9-2019-12-11"><a href="#_3-2-9-2019-12-11" class="header-anchor">#</a> 3.2.9 / 2019-12-11</h2> <h3 id="fixed-57"><a href="#fixed-57" class="header-anchor">#</a> Fixed:</h3> <ul><li>Harden handling of getting actual container name from a service</li></ul> <h2 id="_3-2-8-2019-12-10"><a href="#_3-2-8-2019-12-10" class="header-anchor">#</a> 3.2.8 / 2019-12-10</h2> <h3 id="fixed-58"><a href="#fixed-58" class="header-anchor">#</a> Fixed</h3> <ul><li>Harden behavior of committing artifacts.</li></ul> <h2 id="_3-2-7-2019-12-06"><a href="#_3-2-7-2019-12-06" class="header-anchor">#</a> 3.2.7 / 2019-12-06</h2> <h3 id="new-fixed"><a href="#new-fixed" class="header-anchor">#</a> New/Fixed:</h3> <ul><li>Ignore ssl errors when running tests'</li> <li>Better way of handling relative paths in LocalShell</li> <li>Refactor RunCommandBase to define a runContext. Could be host, or dockerHost</li> <li>Bump symfony/http-foundation from 4.2.3 to 4.4.1</li></ul> <h2 id="_3-2-6-2019-12-01"><a href="#_3-2-6-2019-12-01" class="header-anchor">#</a> 3.2.6 / 2019-12-01</h2> <h3 id="fixed-59"><a href="#fixed-59" class="header-anchor">#</a> Fixed:</h3> <ul><li>Fix branch handling in deploy command</li></ul> <h2 id="_3-2-5-2019-12-01"><a href="#_3-2-5-2019-12-01" class="header-anchor">#</a> 3.2.5 / 2019-12-01</h2> <h3 id="new-29"><a href="#new-29" class="header-anchor">#</a> New:</h3> <ul><li>Add preliminary documentation for webhooks</li> <li>Allow methods to alter script callbacks</li> <li>Add test for task-specific webhooks</li> <li>Implement new command <code>webhook</code> which allows the user to invoke a webhook defined in a fabfile.</li></ul> <h3 id="fixed-60"><a href="#fixed-60" class="header-anchor">#</a> Fixed:</h3> <ul><li>Fix non-working branch argument-handling, old code did not respect the argument at all</li></ul> <h2 id="_3-2-4-2019-11-23"><a href="#_3-2-4-2019-11-23" class="header-anchor">#</a> 3.2.4 / 2019-11-23</h2> <h3 id="new-30"><a href="#new-30" class="header-anchor">#</a> New:</h3> <ul><li>Add dedicated <code>npm</code> method, similar to yarn-method.</li></ul> <h3 id="fixed-61"><a href="#fixed-61" class="header-anchor">#</a> Fixed:</h3> <ul><li>Issue #62: Switch to using single -m for commit message</li></ul> <h2 id="_3-2-3-2019-11-18"><a href="#_3-2-3-2019-11-18" class="header-anchor">#</a> 3.2.3 / 2019-11-18</h2> <h3 id="fixed-62"><a href="#fixed-62" class="header-anchor">#</a> Fixed:</h3> <ul><li>Fixed a security alert in a symfony dependency</li></ul> <h2 id="_3-2-2-2019-11-14"><a href="#_3-2-2-2019-11-14" class="header-anchor">#</a> 3.2.2 / 2019-11-14</h2> <h3 id="new-31"><a href="#new-31" class="header-anchor">#</a> New:</h3> <ul><li>new method <code>yarn</code>, which will run yarn install on install/reset task and a custom build command when running the reset-task</li> <li>new custom build artifact available, with full control over the stages</li></ul> <h3 id="fixed-63"><a href="#fixed-63" class="header-anchor">#</a> Fixed:</h3> <ul><li>Require grumphp only for dev</li> <li>Use latest grumphp</li> <li>Update precommit config</li> <li>Report script errors early</li> <li>Delete target file/folder before copying</li> <li>Tag build artifact with existing tag of source repository</li> <li>Disregard confirm action if --force option is set</li> <li>Fix tests and keep option <code>override</code></li> <li>Fix possible exception, when using -v show possible tokens</li> <li>Allow multiple options '--arguments'</li> <li>Allow --arguments for deploy command</li> <li>Refactor actions, add new action installScript</li> <li>Set the type as <code>installation_type</code> as state in drupal 8</li></ul> <h2 id="_3-2-1-2019-10-14"><a href="#_3-2-1-2019-10-14" class="header-anchor">#</a> 3.2.1 / 2019-10-14</h2> <h3 id="fixed-64"><a href="#fixed-64" class="header-anchor">#</a> Fixed:</h3> <ul><li>Include version number for temporary folder</li></ul> <h2 id="_3-2-0-2019-10-14"><a href="#_3-2-0-2019-10-14" class="header-anchor">#</a> 3.2.0 / 2019-10-14</h2> <h3 id="new-32"><a href="#new-32" class="header-anchor">#</a> New:</h3> <ul><li><code>rootFolder</code> is set by default now to the folder where the fabfile is located.</li> <li>All context variables are exposed as replacement patterns for using in scripts.</li> <li>new method <code>artifacts--git</code> to build an artifact and push it to a git repository, see new documentation about artifacts.</li> <li>Update documentation regarding the new artifact workflow</li></ul> <h3 id="changed-14"><a href="#changed-14" class="header-anchor">#</a> Changed</h3> <ul><li>Refactored and renamed method <code>ftp-sync</code> to <code>artifacts--ftp</code> in preparation of artifacts--git. Be aware that you might need to change existing configuration!</li></ul> <h2 id="_3-1-0-2019-09-27"><a href="#_3-1-0-2019-09-27" class="header-anchor">#</a> 3.1.0 / 2019-09-27</h2> <h3 id="new-33"><a href="#new-33" class="header-anchor">#</a> New</h3> <ul><li>Switched to vuepress as documentation tool</li></ul> <h2 id="_3-1-0-beta-1-2019-09-14"><a href="#_3-1-0-beta-1-2019-09-14" class="header-anchor">#</a> 3.1.0-beta.1 / 2019-09-14</h2> <h3 id="new-34"><a href="#new-34" class="header-anchor">#</a> New</h3> <ul><li>Get drush command to dump sql from configuration</li> <li>Allow environment for host-configs, fixes #56</li> <li>Support replacements for host-environment variables</li></ul> <h3 id="fixed-65"><a href="#fixed-65" class="header-anchor">#</a> Fixed</h3> <ul><li>Refactor tests, so they can be run from root foldergit</li> <li>Push and restore working dir</li> <li>Fix build script regarding not enough file handles</li></ul> <h2 id="_3-0-22-2019-09-12"><a href="#_3-0-22-2019-09-12" class="header-anchor">#</a> 3.0.22 / 2019-09-12</h2> <h3 id="new-35"><a href="#new-35" class="header-anchor">#</a> New</h3> <ul><li>Add support sql-sanitize for reset task</li></ul> <h3 id="fixed-66"><a href="#fixed-66" class="header-anchor">#</a> Fixed</h3> <ul><li>Fix for exception after certain docker commands.</li></ul> <h2 id="_3-0-21-2019-08-21"><a href="#_3-0-21-2019-08-21" class="header-anchor">#</a> 3.0.21 / 2019-08-21</h2> <h3 id="fixed-67"><a href="#fixed-67" class="header-anchor">#</a> Fixed</h3> <ul><li>Document <code>skipCreateDatabase</code></li> <li>Add chmod to the list of executables, fixes #57</li></ul> <h2 id="_3-0-20-2019-07-07"><a href="#_3-0-20-2019-07-07" class="header-anchor">#</a> 3.0.20 / 2019-07-07</h2> <h3 id="fixed-68"><a href="#fixed-68" class="header-anchor">#</a> Fixed</h3> <ul><li>Show error-message if shell could not be initialized. Fixes #54</li> <li>Satisfy phpstan and add it as a new precommit-hook</li> <li>Fix drush and other commands when using local shell provider</li> <li>Prevent filename collision when running docker copySSHKeys, fixes #52</li> <li>Fix issue with special characters in the pw</li> <li>Use latest version of stecman/symfony-console-completion</li></ul> <h2 id="_3-0-19-2019-06-25"><a href="#_3-0-19-2019-06-25" class="header-anchor">#</a> 3.0.19 / 2019-06-25</h2> <h3 id="fixed-69"><a href="#fixed-69" class="header-anchor">#</a> Fixed</h3> <ul><li>Fix warning</li> <li>Better errorhandling</li></ul> <h2 id="_3-0-18-2019-06-18"><a href="#_3-0-18-2019-06-18" class="header-anchor">#</a> 3.0.18 / 2019-06-18</h2> <h3 id="fixed-70"><a href="#fixed-70" class="header-anchor">#</a> Fixed</h3> <ul><li>Smaller enhancements regarding scaffolding</li> <li>Sleep only when shell did not produce any output</li></ul> <h2 id="_3-0-16-2019-06-09"><a href="#_3-0-16-2019-06-09" class="header-anchor">#</a> 3.0.16 / 2019-06-09</h2> <h3 id="fixed-71"><a href="#fixed-71" class="header-anchor">#</a> Fixed</h3> <ul><li>Fix introduced regression when running a drush command</li></ul> <h2 id="_3-0-15-2019-06-07"><a href="#_3-0-15-2019-06-07" class="header-anchor">#</a> 3.0.15 / 2019-06-07</h2> <h3 id="changed-15"><a href="#changed-15" class="header-anchor">#</a> Changed</h3> <ul><li>Enhance support for docker shells</li> <li>Rework shell execution for docker-exec</li> <li>Allow relative paths for docker rootFolder. Add sleep to reduce processor drain</li></ul> <h3 id="fixed-72"><a href="#fixed-72" class="header-anchor">#</a> Fixed:</h3> <ul><li>Fix default values</li></ul> <h2 id="_3-0-14-2019-05-28"><a href="#_3-0-14-2019-05-28" class="header-anchor">#</a> 3.0.14 / 2019-05-28</h2> <h3 id="fixed-73"><a href="#fixed-73" class="header-anchor">#</a> Fixed</h3> <ul><li>Fix bug with variants overriding existing configuration</li></ul> <h2 id="_3-0-12-2019-05-27"><a href="#_3-0-12-2019-05-27" class="header-anchor">#</a> 3.0.12 / 2019-05-27</h2> <h3 id="fixed-74"><a href="#fixed-74" class="header-anchor">#</a> Fixed</h3> <ul><li>Run composer install on <code>installPrepare</code></li></ul> <h2 id="_3-0-11-2019-05-19"><a href="#_3-0-11-2019-05-19" class="header-anchor">#</a> 3.0.11 / 2019-05-19</h2> <h3 id="fixed-75"><a href="#fixed-75" class="header-anchor">#</a> Fixed</h3> <ul><li>Fix bug when using inheritsFromBlueprint</li></ul> <h2 id="_3-0-10-2019-05-19"><a href="#_3-0-10-2019-05-19" class="header-anchor">#</a> 3.0.10 / 2019-05-19</h2> <h3 id="added-2"><a href="#added-2" class="header-anchor">#</a> Added</h3> <ul><li><p>Add new inheritFromBlueprint config, so a host-config can inherit from a blueprinted config</p> <div class="language- extra-class"><pre><code>		hosts:
		  local:
		    inheritFromBlueprint:
		      config: &lt;config-which-contains-blueprint&gt;
		      variant: &lt;the-variant&gt;
</code></pre></div><p>Thats roughly the same as calling <code>phab --config=&lt;config-which-contains-blueprint&gt; --blueprint=&lt;the-variant&gt;</code> but using it in the fabfile allows you to override the config if needed.</p></li> <li><p>Introduce deprecated-flag for inherited data. Will display a warning, when found inside data</p></li> <li><p>Enhance output-command to support output of docker-, host- and applied blueprint config, and also of all global data.</p> <div class="language- extra-class"><pre><code>phab -clocal output --what host # will output the complete host-config
phab -cremote output --what docker # will output the complete docker-host config
phab output --what global # will output all global settings
</code></pre></div></li></ul> <h2 id="_3-0-9-2019-05-11"><a href="#_3-0-9-2019-05-11" class="header-anchor">#</a> 3.0.9 / 2019-05-11</h2> <h3 id="fixed-76"><a href="#fixed-76" class="header-anchor">#</a> Fixed</h3> <ul><li>Add validation for foldernames</li> <li>Harmonize option copy-from</li></ul> <h2 id="_3-0-8-2019-05-10"><a href="#_3-0-8-2019-05-10" class="header-anchor">#</a> 3.0.8 / 2019-05-10</h2> <h3 id="fixed-77"><a href="#fixed-77" class="header-anchor">#</a> Fixed</h3> <ul><li>Use correct port range, previous code might have used ephemeral ports, which are reserved -- should fix sporadically failing ssh-connections, fixes #49</li></ul> <h2 id="_3-0-7-2019-05-01"><a href="#_3-0-7-2019-05-01" class="header-anchor">#</a> 3.0.7 / 2019-05-01</h2> <h3 id="fixed-78"><a href="#fixed-78" class="header-anchor">#</a> Fixed</h3> <ul><li>Show a warning if local users' keyagent does not have a key when running <code>docker copySSHKeys</code></li></ul> <h2 id="_3-0-6-2019-04-25"><a href="#_3-0-6-2019-04-25" class="header-anchor">#</a> 3.0.6 / 2019-04-25</h2> <h3 id="fixed-79"><a href="#fixed-79" class="header-anchor">#</a> Fixed</h3> <ul><li>rename setting <code>dockerAuthorizedKeyFile</code> to <code>dockerAuthorizedKeysFile</code>, keep the old one for backwards compatibility</li> <li>if no dockerAuthorizedKeysFile is set, use the public-keys of the ssh-agent instead</li> <li>Cd into siteFolder before restoring a db-dump. (Fixes #48)</li> <li>Ask before scaffolding into an existing directory, can be overridden by <code>--force</code>. Fixes #43</li> <li>Allow --force and --force 1</li> <li>Report errors and stop the execution when errors happen while scaffolding</li> <li>Use latest version of stecman/symfony-console-completion</li> <li>Enable/ disable modules one by one, fixes #39</li> <li>Better error-reporting for inherited files from local and remote</li> <li>Handle variants and error output better</li> <li>Allow the phab binary to called from a regular Composer installation</li> <li>Add the &quot;phab&quot; binary to composer.json explicitly</li> <li>Update passwords documentation</li></ul> <h2 id="_3-0-5-2019-04-17"><a href="#_3-0-5-2019-04-17" class="header-anchor">#</a> 3.0.5 / 2019-04-17</h2> <h3 id="fixed-80"><a href="#fixed-80" class="header-anchor">#</a> Fixed</h3> <ul><li>Cd into siteFolder before restoring a db-dump. (Fixes #48)</li></ul> <h2 id="_3-0-4-2019-03-18"><a href="#_3-0-4-2019-03-18" class="header-anchor">#</a> 3.0.4 / 2019-03-18</h2> <h3 id="new-36"><a href="#new-36" class="header-anchor">#</a> New</h3> <ul><li>Support for variants and parallel execution for a set of variants</li></ul> <h3 id="fixed-81"><a href="#fixed-81" class="header-anchor">#</a> Fixed</h3> <ul><li>Document mattermost integration, fixes #29</li> <li>Fix broken shell autocompletion</li> <li>Limit output when using phab with pipes</li> <li>Include jump-host when running ssh:command if needed (fixes #36)</li> <li>Display destination for put:file (Fixes #37)</li></ul> <h2 id="_3-0-3-2019-03-07"><a href="#_3-0-3-2019-03-07" class="header-anchor">#</a> 3.0.3 / 2019-03-07</h2> <h3 id="fixed-82"><a href="#fixed-82" class="header-anchor">#</a> Fixed</h3> <ul><li>Use progressbar when scaffolding more then 3 asset-files</li> <li>FIx a regression for task-specific scripts. (Fixes #31)</li> <li>Make sure, that task-specific scripts are run. (Fixes #31)</li> <li>Add a notification before starting a db dump (Fixes #30 and #33)</li> <li>If no unstable update is available, try the stable branch (Fixes #34)</li></ul> <h2 id="_3-0-2-2019-03-01"><a href="#_3-0-2-2019-03-01" class="header-anchor">#</a> 3.0.2 / 2019-03-01</h2> <h3 id="fixed-83"><a href="#fixed-83" class="header-anchor">#</a> Fixed</h3> <ul><li>Fix scaffolding of empty files via http</li> <li>Add support to limit files handled by twig by an extension as third parameter to copy_assets</li> <li>Add support for a dedicated projectFolder, add support for dependent variables, so you can compose variables from other variables</li> <li>strip first subfolder from filenames to copy when running app:scaffold, keep folder hierarchy for subsequents folders</li> <li>Refactor TaskContext::getStyle to TaskContext::io for clearer code</li> <li>Fix a bug on copyFrom for specific multi.site setups</li> <li>Fix bug when running app:scaffold where stages do not fire existing docker-tasks</li></ul> <h2 id="_3-0-1-2019-02-25"><a href="#_3-0-1-2019-02-25" class="header-anchor">#</a> 3.0.1 / 2019-02-25</h2> <h3 id="fixed-84"><a href="#fixed-84" class="header-anchor">#</a> Fixed</h3> <ul><li>Fix a bug in docker:getIpAddress when using the service keyword and the container is not running.</li></ul> <h3 id="new-37"><a href="#new-37" class="header-anchor">#</a> New</h3> <ul><li>Add a new stage <code>prepareDestination</code> for <code>app:create</code></li></ul> <h2 id="_3-0-0-2019-02-14"><a href="#_3-0-0-2019-02-14" class="header-anchor">#</a> 3.0.0 / 2019-02-14</h2> <h3 id="fixed-85"><a href="#fixed-85" class="header-anchor">#</a> Fixed</h3> <ul><li>Increase timeout for non-interactive processes.</li> <li><code>restore:sql-from-file</code>: Run a preparation method so tunnels are in place before running the actual scp</li> <li><code>copy-from files</code>: Fix for &quot;too many arguments&quot; error message of rsync</li></ul> <h2 id="_3-0-0-beta-6-2019-02-08"><a href="#_3-0-0-beta-6-2019-02-08" class="header-anchor">#</a> 3.0.0-beta.6 / 2019-02-08</h2> <h3 id="fixed-86"><a href="#fixed-86" class="header-anchor">#</a> Fixed</h3> <ul><li>.netrc is optional, show a warning if not found, instead of breaking the flow (Fixes #27)</li></ul> <h2 id="_3-0-0-beta-5-2019-02-05"><a href="#_3-0-0-beta-5-2019-02-05" class="header-anchor">#</a> 3.0.0-beta.5 / 2019-02-05</h2> <h3 id="fixed-87"><a href="#fixed-87" class="header-anchor">#</a> Fixed</h3> <ul><li>fixes a bug resolving remote assets for app:scaffold</li></ul> <h2 id="_3-0-0-beta-4-2019-01-28"><a href="#_3-0-0-beta-4-2019-01-28" class="header-anchor">#</a> 3.0.0-beta.4 / 2019-01-28</h2> <h3 id="fixed-88"><a href="#fixed-88" class="header-anchor">#</a> Fixed</h3> <ul><li>Exit early after app-update to prevent php exception because of missing files. (Fixes #24)</li> <li>Make update-check more robust</li></ul> <h2 id="_3-0-0-beta-3-2019-01-26"><a href="#_3-0-0-beta-3-2019-01-26" class="header-anchor">#</a> 3.0.0-beta.3 / 2019-01-26</h2> <h3 id="new-38"><a href="#new-38" class="header-anchor">#</a> New</h3> <ul><li>Add transform to questions, update documentation, fix tests</li> <li>Refactor questions in <code>app:scaffold</code> questions are now part of the scaffold.yml</li> <li>Add support for copying a .netrc file to the docker container</li> <li>New command <code>jira</code>which will show all open tickets for the given project and user. (#22)</li></ul> <h2 id="_3-0-0-beta-2-2019-01-19"><a href="#_3-0-0-beta-2-2019-01-19" class="header-anchor">#</a> 3.0.0-beta.2 / 2019-01-19</h2> <h3 id="new-39"><a href="#new-39" class="header-anchor">#</a> New</h3> <ul><li>Add support for .fabfile.local.yaml in user-folder</li> <li>Show a message when a new version of phabalicious is available.</li></ul> <h3 id="fixed-89"><a href="#fixed-89" class="header-anchor">#</a> Fixed</h3> <ul><li>Documentation for the new jira-command (#22)</li> <li>Remove trailing semicolon (Fixes #23)</li> <li>Report a proper error message when handling modules_enabled.txt or modules_disabled.txt is failing</li> <li>Fix shell-completion</li></ul> <h2 id="_3-0-0-beta-1-2019-01-10"><a href="#_3-0-0-beta-1-2019-01-10" class="header-anchor">#</a> 3.0.0-beta.1 / 2019-01-10</h2> <h3 id="fixed-90"><a href="#fixed-90" class="header-anchor">#</a> fixed</h3> <ul><li>Fix logic error in InstallCommand, add testcases (Fixes #21)</li> <li>Wrap interactive shell with bash only if we have a command to execute</li> <li>Try up to 5 parent folders to find suitable fabfiles (Fixes #18)</li> <li>Use paralell uploads for ftp-deployments</li> <li>Use a login-shell when running drush or drupalconsole interactively. (Fixes #20)</li> <li>Add autocompletion for <code>install-from</code></li></ul> <h2 id="_3-0-0-alpha-8-2018-12-20"><a href="#_3-0-0-alpha-8-2018-12-20" class="header-anchor">#</a> 3.0.0-alpha.8 / 2018-12-20</h2> <h3 id="fixed-91"><a href="#fixed-91" class="header-anchor">#</a> fixed</h3> <ul><li>Call overridden methods only one time, add missin reset-implementation to platform-method (fixes #14)</li> <li>Increase verbosity of app:scaffold</li> <li>Add missing twig-dependency to phar-creation (fixes #17)</li> <li>Fix handling of relative paths in app:scaffold (Fixes #16)</li> <li>Fix parsing of multiple IPs from a docker-container (Fixes #15)</li> <li>Pass available arguments to autocompletion for command copy-from (Fixes #13)</li> <li>Run drupalconsole in an interactive shell</li></ul> <h2 id="_3-0-0-alpha-7-2018-12-14"><a href="#_3-0-0-alpha-7-2018-12-14" class="header-anchor">#</a> 3.0.0-alpha.7 / 2018-12-14</h2> <h3 id="fixed-92"><a href="#fixed-92" class="header-anchor">#</a> fixed</h3> <ul><li>Handle app-options correctly when doing shell-autocompletion (Fixes #12)</li> <li>Silent warnings when doing autocompletion (fixes #11)</li> <li>Better command output for start-remote-access (fixes #10)</li> <li>Throw exception if docker task fails</li> <li>Fix command output parsing</li> <li>Source /etc/profile and .bashrc</li> <li>Better defaults for lftp</li></ul> <h2 id="_3-0-0-alpha-6-2018-12-11"><a href="#_3-0-0-alpha-6-2018-12-11" class="header-anchor">#</a> 3.0.0-alpha.6 / 2018-12-11</h2> <h3 id="fixed-93"><a href="#fixed-93" class="header-anchor">#</a> fixed</h3> <ul><li>Some bugfixes for ftp-deployments</li> <li>Nicer output</li> <li>Add docs for shell-autcompletion</li> <li>Fix fish autocompletion (sort of)</li> <li>Set version number, when not bundling as phar</li></ul> <h2 id="_3-0-0-alpha-5-2018-12-08"><a href="#_3-0-0-alpha-5-2018-12-08" class="header-anchor">#</a> 3.0.0-alpha.5 / 2018-12-08</h2> <h3 id="fixed-94"><a href="#fixed-94" class="header-anchor">#</a> fixed</h3> <ul><li>Use real version number</li> <li>Fix phar-build</li></ul> <h2 id="_3-0-0-alpha-4-2018-12-08"><a href="#_3-0-0-alpha-4-2018-12-08" class="header-anchor">#</a> 3.0.0-alpha.4 / 2018-12-08</h2> <h3 id="new-40"><a href="#new-40" class="header-anchor">#</a> new</h3> <ul><li>New command <code>self-update</code>, will download and install the latest available version</li> <li>New method <code>ftp-sync</code> to deploy code-bases to a remote ftp-instance</li> <li>Introduction of a password-manager for retrieving passwords from the user or a special file</li></ul> <h3 id="changed-16"><a href="#changed-16" class="header-anchor">#</a> changed</h3> <ul><li>Switch to box for building phars</li></ul> <h3 id="fixed-95"><a href="#fixed-95" class="header-anchor">#</a> fixed</h3> <ul><li>Do not run empty script lines (Fixes #8)</li> <li>Set folder for script-phase</li> <li>Set rootFolder fot task-specific scripts</li> <li>Support legacy host-types</li></ul> <h2 id="_3-0-0-develop"><a href="#_3-0-0-develop" class="header-anchor">#</a> 3.0.0 develop</h2> <p>Fabalicious is now rewritten in PHP, so we changed the name to make the separation more clear. Phabalicious is now a symfony console app and uses a more unix-style approach to arguments and options. E.g. instead of <code>config:&lt;name-of-config&gt;</code> use <code>--config=&lt;name-of-config&gt;</code></p> <h3 id="why-the-rewrite"><a href="#why-the-rewrite" class="header-anchor">#</a> Why the rewrite</h3> <p>Python on Mac OS X is hard, multiple versions, multiple locations etc. Every machine needed some magic hands to get fabalicious working on it. Fabalicious itself is written in python 2.x, but the world is moving on to python 3. Fabric, the underlying lib we used for fabalicious is also moving forward to version 2 which is not backwards compatible yet with fabric 1. On the other side we are now maintaining more and more containerized setups where you do not need ssh to run commands in. A popular example is docker and its whole universe. Fabric couldn't help us here, and fabric is moving into a different direction.</p> <p>And as a specialized Drupal boutique we write PHP all day long. To make it easier for our team to improve the toolset by ourselves and get help from the rest of the community, using PHP/ Symfony as a base for the rewrite was a no-brainer.</p> <p>Why not use existing tools, like <a href="https://robo.li/" target="_blank" rel="noopener noreferrer">robo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, <a href="https://deployer.org/" target="_blank" rel="noopener noreferrer">deployer<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> or other tools? These tools are valuable instruments in our tool-belt, but none of them fit our requirements completely. We see phabalicious as a meta-tool integrating with all of them in nice and easy way. We need a lot of flexibility as we need to support a lot of different tech- and hosting-stacks, so we decided to port fabalicious to phabalicious.</p> <p>There's a lot of change going on here, but the structure of the fabfile.yaml is still the same.</p> <h3 id="changed-command-line-options-and-arguments"><a href="#changed-command-line-options-and-arguments" class="header-anchor">#</a> Changed command line options and arguments</h3> <p>As fabric (the underlying lib we used for fabalicious) is quite different to symfony console apps there are more subtle changes. For example you can invoke only one task per run. With fabalicious it was easy to run multiple commands:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>fab config:mbb docker:run reset <span class="token function">ssh</span>
</code></pre></div><p>This is not possible anymore with phabalicious, you need to run the commands in sequence. If you need that on a regular basis, a <code>script</code> might be a good workaround.</p> <p>Most notably the handling of arguments and options has changed a lot. Fabric gave us a lot of flexibility here, symfony is more strict, but has on the other side some advantages for example self-documenting all possible arguments and options for a given task.</p> <h4 id="some-examples"><a href="#some-examples" class="header-anchor">#</a> Some examples</h4> <table><thead><tr><th>Old syntax</th> <th>New syntax</th></tr></thead> <tbody><tr><td><code>fab config:mbb about</code></td> <td><code>phab about --config mbb</code></td></tr> <tr><td><code>fab config:mbb about</code></td> <td><code>phab --config=mbb about</code></td></tr> <tr><td><code>fab config:mbb blueprint:de deploy</code></td> <td><code>phab deploy --config mbb --blueprint de</code></td></tr> <tr><td><code>fab config:mbb blueprint:de deploy</code></td> <td><code>phab --config=mbb --blueprint=de mbb</code></td></tr></tbody></table> <h3 id="new-features"><a href="#new-features" class="header-anchor">#</a> New features</h3> <ul><li><p>Introduction of ShellProviders, they will provide a shell, to run scripts into. Currently implemented are</p> <ul><li><code>local</code>, run the shell-commands on your local host</li> <li><code>ssh</code>, runs the shell-commands on a remote host.</li></ul> <p>Every shell-provider can have different required options. Currently add the needed shell-provider to your list of needs, e.g.</p> <div class="language- extra-class"><pre><code>    needs:
      - local
      - git
      - drush
</code></pre></div></li> <li><p>new global settings <code>disableScripts</code> which will not add the <code>script</code>-method to the needs.</p></li> <li><p>there's a new command to list all blueprints: <code>list:blueprints</code></p></li> <li><p>new shell-provider <code>dockerExec</code> which will start a shell with the help of <code>docker exec</code> instead of ssh.</p></li> <li><p>new config-option <code>shellProvider</code>, where you can override the shell-provider to your liking.</p> <div class="language- extra-class"><pre><code>  hosts:
    mbb:
      shellProvider: docker-exec
</code></pre></div></li> <li><p>You can get help for a specific task via <code>phab help &lt;task&gt;</code>. It will show all possible options and some help.</p></li> <li><p>docker-compose version 23 changes the schema how names of docker-containers are constructed. To support this change we can now declare the needed service to compute the correct container-name from.</p> <div class="language- extra-class"><pre><code>  hosts:
    testHost:
      docker:
        service: web
</code></pre></div><p>The <code>name</code> will be discarded, if a <code>service</code>-entry is set.</p></li> <li><p>new method <code>ftp-sync</code>, it's a bit special. This method creates the app into a temporary folder, and syncs it via <code>lftp</code> to a remote instance. Here's a complete example (most of them are provided via sensible defaults):</p> <div class="language- extra-class"><pre><code>  excludeFiles:
    ftp-sync:
      - .git/
      - node_modules
  hosts:
    ftpSyncSample:
      needs:
        - git
        - ftp-sync
        - local
      ftp:
        user: &lt;ftp-user&gt;
        password: &lt;ftp-password&gt; #
        host: &lt;ftp-host&gt;
        port: 21
        lftpOptions:
          - --ignoreTime
          - --verbose=3
          - --no-perms
</code></pre></div><p>You can add your password to the file <code>.phabalicious-credentials</code> (see passwords.md) so phabalicious pick it up.</p></li></ul> <h3 id="changed-17"><a href="#changed-17" class="header-anchor">#</a> Changed</h3> <ul><li><p><code>docker:startRemoteAccess</code> is now the task <code>start-remote-access</code> as it makes more sense.</p></li> <li><p>the <code>list</code>-task needed to be renamed to <code>list:hosts</code>.</p></li> <li><p>the <code>--list</code> task (which was built into fabric) is now <code>list</code>.</p></li> <li><p>the <code>offline</code>-task got removed, instead add the <code>-offline</code>-option and set it to 1, e.g.</p> <div class="language- extra-class"><pre><code>phab --offline=1 --config=mbb about
</code></pre></div></li> <li><p>the task <code>logLevel</code> is replaced by the builtin <code>-v</code>-option</p></li> <li><p>autocompletion works now differently than before, but now bash and zsh are supported. Please have a look into the documentation how to install it.</p> <ul><li><p>for fish-shells</p> <div class="language- extra-class"><pre><code>phab _completion --generate-hook --shell-type fish | source
</code></pre></div></li> <li><p>for zsh/bash-shells</p> <div class="language- extra-class"><pre><code>source &lt;(phab _completion --generate-hook)
</code></pre></div></li></ul></li> <li><p><code>listBackups</code> got renamed to <code>list:backups</code></p></li> <li><p><code>backupDB</code> and <code>backupFiles</code> got removed, use <code>phab backup files</code> or <code>phab backup db</code>, the same mechanism works for restoring a backup.</p></li> <li><p><code>getFile</code> got renamed to <code>get:file</code></p></li> <li><p><code>putFile</code> got renamed to <code>put:file</code></p></li> <li><p><code>getBackup</code> got renamed to <code>get:backup</code></p></li> <li><p><code>getFilesDump</code> got renamed to <code>get:files-backup</code></p></li> <li><p><code>getProperty</code> got renamed to <code>get:property</code></p></li> <li><p><code>getSQLDump</code> got renamed to <code>get:sql-dump</code></p></li> <li><p><code>restoreSQLFromFile</code> got renamed to <code>restore:sql-from-file</code></p></li> <li><p><code>copyDBFrom</code> got renamed to <code>copy-from &lt;config&gt; db</code></p></li> <li><p><code>copyFilesFrom</code> got renamed to <code>copy-from &lt;config&gt; files</code></p></li> <li><p><code>installFrom</code> got renamed to <code>install:from</code></p></li></ul> <h3 id="deprecated"><a href="#deprecated" class="header-anchor">#</a> Deprecated</h3> <ul><li>script-function <code>fail_on_error</code> is deprecated, use <code>breakOnFirstError(&lt;bool&gt;)</code></li> <li><code>runLocally</code> is deprecated, add a new need <code>local</code> to the lists of needs.</li> <li><code>strictHostKeyChecking</code> is deprecated, use <code>disableKnownHosts</code> instead.</li> <li><code>getProperty</code> is deprecated and got renamed to <code>get-property</code></li> <li><code>ssh</code> is deprecated and got renamed to <code>shell</code> as some implementations might not use ssh.</li> <li><code>sshCommand</code> is deprecated and got renamed to <code>shell:command</code> and will return the command to run a shell with the given configuration</li> <li>the needs <code>drush7</code>, <code>drush8</code> and <code>drush9</code> are deprecated, use the need <code>drush</code> and the newly introduced options <code>drupalVersion</code> and <code>drushVersion</code> instead,</li> <li>the <code>slack</code>-configuration got removed and got replaced by a general notification solution, currently only with a mattermost implementation.</li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/factorial-io/phabalicious/edit/master/docs/Changelog.md" target="_blank" rel="noopener noreferrer">Help us improve this page!</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/how-to-use-secrets.html" class="prev">
        Handling secrets with phabalicious
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.6b382d26.js" defer></script><script src="/assets/js/3.2184e550.js" defer></script><script src="/assets/js/12.8921015e.js" defer></script>
  </body>
</html>
