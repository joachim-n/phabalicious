<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Running phabalicious | Phabalicious</title>
    <meta name="generator" content="VuePress 1.9.5">
    
    <meta name="description" content="A deployment system and general purpose helper">
    
    <link rel="preload" href="/assets/css/0.styles.f9edc7ac.css" as="style"><link rel="preload" href="/assets/js/app.6b382d26.js" as="script"><link rel="preload" href="/assets/js/3.2184e550.js" as="script"><link rel="preload" href="/assets/js/32.265cdd80.js" as="script"><link rel="prefetch" href="/assets/js/10.51e494e5.js"><link rel="prefetch" href="/assets/js/11.07753871.js"><link rel="prefetch" href="/assets/js/12.8921015e.js"><link rel="prefetch" href="/assets/js/13.ed780963.js"><link rel="prefetch" href="/assets/js/14.68947b36.js"><link rel="prefetch" href="/assets/js/15.364a6690.js"><link rel="prefetch" href="/assets/js/16.24f8eca2.js"><link rel="prefetch" href="/assets/js/17.babaec76.js"><link rel="prefetch" href="/assets/js/18.c99d6156.js"><link rel="prefetch" href="/assets/js/19.81b07e7a.js"><link rel="prefetch" href="/assets/js/20.8eee2bea.js"><link rel="prefetch" href="/assets/js/21.ef9b0481.js"><link rel="prefetch" href="/assets/js/22.c337b1e1.js"><link rel="prefetch" href="/assets/js/23.fad1451d.js"><link rel="prefetch" href="/assets/js/24.79aefc24.js"><link rel="prefetch" href="/assets/js/25.a079a898.js"><link rel="prefetch" href="/assets/js/26.8f705b32.js"><link rel="prefetch" href="/assets/js/27.828f7a63.js"><link rel="prefetch" href="/assets/js/28.f7b6d275.js"><link rel="prefetch" href="/assets/js/29.159a173c.js"><link rel="prefetch" href="/assets/js/30.16e78a4f.js"><link rel="prefetch" href="/assets/js/31.b2e2bbf0.js"><link rel="prefetch" href="/assets/js/4.bc2a6058.js"><link rel="prefetch" href="/assets/js/5.0c470a50.js"><link rel="prefetch" href="/assets/js/6.29119eaa.js"><link rel="prefetch" href="/assets/js/7.e7ee370b.js"><link rel="prefetch" href="/assets/js/8.e34e246f.js"><link rel="prefetch" href="/assets/js/9.7b58ddf7.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.b9a44f16.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f9edc7ac.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Phabalicious</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/factorial-io/phabalicious" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/factorial-io/phabalicious" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/guide.html" class="sidebar-heading clickable open"><span>Documentation</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide.html" class="sidebar-link">How does phabalicious work in two sentences</a></li><li><a href="/installation.html" class="sidebar-link">Installation</a></li><li><a href="/usage.html" aria-current="page" class="active sidebar-link">Running phabalicious</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/usage.html#list-of-available-commands" class="sidebar-link">List of available commands</a></li><li class="sidebar-sub-header"><a href="/usage.html#command-line-options" class="sidebar-link">Command line options</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/usage.html#v-vv-vvv-vvvv" class="sidebar-link">-v/ -vv/ -vvv/ -vvvv</a></li><li class="sidebar-sub-header"><a href="/usage.html#config" class="sidebar-link">--config</a></li><li class="sidebar-sub-header"><a href="/usage.html#offline" class="sidebar-link">--offline</a></li><li class="sidebar-sub-header"><a href="/usage.html#fabfile" class="sidebar-link">--fabfile</a></li><li class="sidebar-sub-header"><a href="/usage.html#blueprint" class="sidebar-link">--blueprint</a></li><li class="sidebar-sub-header"><a href="/usage.html#variants" class="sidebar-link">--variants</a></li><li class="sidebar-sub-header"><a href="/usage.html#s-set" class="sidebar-link">-s / --set</a></li><li class="sidebar-sub-header"><a href="/usage.html#a-arguments" class="sidebar-link">-a / --arguments</a></li><li class="sidebar-sub-header"><a href="/usage.html#offline-2" class="sidebar-link">--offline</a></li><li class="sidebar-sub-header"><a href="/usage.html#skip-cache" class="sidebar-link">--skip-cache</a></li></ul></li><li class="sidebar-sub-header"><a href="/usage.html#used-environment-variables" class="sidebar-link">Used environment variables:</a></li></ul></li><li><a href="/configuration.html" class="sidebar-link">Structure of the configuration file</a></li><li><a href="/commands.html" class="sidebar-link">Available commands</a></li><li><a href="/inheritance.html" class="sidebar-link">Inheritance</a></li><li><a href="/docker-integration.html" class="sidebar-link">Docker integration</a></li><li><a href="/workspace.html" class="sidebar-link">Setup a local dev environment (multibasebox)</a></li><li><a href="/scripts.html" class="sidebar-link">Scripts</a></li><li><a href="/scaffolder.html" class="sidebar-link">Scaffolding arbitrary files</a></li><li><a href="/app-scaffold.html" class="sidebar-link">Scaffolding a new app</a></li><li><a href="/app-create-destroy.html" class="sidebar-link">Creating/ destroying an app from existing configuration</a></li><li><a href="/deploying-artifacts.html" class="sidebar-link">Deploying artifacts</a></li><li><a href="/kubernetes.html" class="sidebar-link">Kubernetes integration</a></li><li><a href="/offsite-backups.html" class="sidebar-link">Offsite backups</a></li><li><a href="/local-overrides.html" class="sidebar-link">Local overrides</a></li><li><a href="/passwords.html" class="sidebar-link">Passwords and secrets</a></li><li><a href="/contribute.html" class="sidebar-link">Contributing to Phabalicious</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/blog/" class="sidebar-heading clickable"><span>Blog</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/introduction.html" class="sidebar-link">A short introduction into phabalicious</a></li><li><a href="/blog/architecture.html" class="sidebar-link">Introduction and overall architecture</a></li><li><a href="/blog/whats-new-in-phab-3-7.html" class="sidebar-link">What's new in phabalicious 3.7?</a></li><li><a href="/blog/how-to-use-secrets.html" class="sidebar-link">Handling secrets with phabalicious</a></li></ul></section></li><li><a href="/Changelog.html" class="sidebar-link">Changelog</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="running-phabalicious"><a href="#running-phabalicious" class="header-anchor">#</a> Running phabalicious</h1> <p>To execute a command with the help of phabalicious, just</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> <span class="token operator">&lt;</span>your-project-folder<span class="token operator">&gt;</span>
phab --config<span class="token operator">=</span><span class="token operator">&lt;</span>your-config-key<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>command<span class="token operator">&gt;</span>
</code></pre></div><p>This will read your fabfile.yaml, look for <code>&lt;your-config-key&gt;</code> in the host-section and run the command <code>&lt;command&gt;</code></p> <p>Add <code>-v</code> ... <code>-vvv</code> to increase the verbosity of phabalicious. You can get a list of all available options by running</p> <div class="language-shell extra-class"><pre class="language-shell"><code>phab <span class="token builtin class-name">help</span> <span class="token operator">&lt;</span>command<span class="token operator">&gt;</span>
</code></pre></div><h2 id="list-of-available-commands"><a href="#list-of-available-commands" class="header-anchor">#</a> List of available commands</h2> <p>You can get a list of <a href="/commands.html">available commands</a> with</p> <div class="language-bash extra-class"><pre class="language-bash"><code>phab list
</code></pre></div><h2 id="command-line-options"><a href="#command-line-options" class="header-anchor">#</a> Command line options</h2> <h3 id="v-vv-vvv-vvvv"><a href="#v-vv-vvv-vvvv" class="header-anchor">#</a> -v/ -vv/ -vvv/ -vvvv</h3> <p>Setting this option will increase the verbosity of phabalicious. Without this settings you'll get only warnings and errors and some informational stuff. If you encounter a problem try increasing the verbosity-level.</p> <h3 id="config"><a href="#config" class="header-anchor">#</a> --config</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>phab --config<span class="token operator">=</span><span class="token operator">&lt;</span>your-config<span class="token operator">&gt;</span>
</code></pre></div><p>Most of the phabalicious commands need the option <code>config</code>. Setting the option will lookup <code>&lt;your-config&gt;</code> in the <code>hosts</code>-section of your <code>fabfile.yaml</code> and the data will be used to run your command with the correct environment.</p> <h3 id="offline"><a href="#offline" class="header-anchor">#</a> --offline</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>phab --offline<span class="token operator">=</span><span class="token number">1</span> --config<span class="token operator">=</span><span class="token operator">&lt;</span>your-config<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>command<span class="token operator">&gt;</span>
</code></pre></div><p>This command will disable remote configuration files. As phabalicious keeps copies of remote configuration-files in <code>~/.phabalicious</code> it will try to load the configuration-file from there.</p> <h3 id="fabfile"><a href="#fabfile" class="header-anchor">#</a> --fabfile</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>Phab --fabfile<span class="token operator">=</span><span class="token operator">&lt;</span>path-to-your-fabfile <span class="token punctuation">..</span>.
</code></pre></div><p>This will try to load the <code>fabfile.yaml</code> from a different location: <code>path-to-your-fabfile</code></p> <h3 id="blueprint"><a href="#blueprint" class="header-anchor">#</a> --blueprint</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>phab --config<span class="token operator">=</span><span class="token operator">&lt;</span>your-config<span class="token operator">&gt;</span> --blueprint<span class="token operator">=</span><span class="token operator">&lt;</span>branch-name<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>command<span class="token operator">&gt;</span>
</code></pre></div><p><code>blueprint</code> will try to load a blueprint-template from the fabfile.yaml and apply the input given as <code>&lt;branch-name&gt;</code> to the template. This is helpful if you want to create/ use a new configuration which has some dynamic parts like the name of the database, the name of the docker-container, etc.</p> <p>The command will look first in the host-config for the property <code>blueprint</code>, afterwards in the dockerHost-configuration <code>&lt;config-name&gt;</code> and eventually in the global namespace. If you want to print the generated configuration as yaml, then use the <code>output</code>-command. The computed configuration is used as the current configuration, that means, you can run other commands against the generated configuration.</p> <p><strong>Available replacement-patterns</strong> and what they do.</p> <p><em>Input is <code>feature/XY-123-my_Branch-name</code>, the project-name is <code>Example project</code></em></p> <table><thead><tr><th>Replacement Pattern</th> <th>value</th></tr></thead> <tbody><tr><td><strong>%slug.with-hyphens.without-feature%</strong></td> <td>xy-123-my-branch-name</td></tr> <tr><td><strong>%slug.with-hyphens%</strong></td> <td>feature-xy-123-my-branch-name</td></tr> <tr><td><strong>%project-slug.with-hypens%</strong></td> <td>example-project</td></tr> <tr><td><strong>%slug%</strong></td> <td>featurexy123mybranchname</td></tr> <tr><td><strong>%project-slug%</strong></td> <td>exampleproject</td></tr> <tr><td><strong>%project-identifier%</strong></td> <td>Example project</td></tr> <tr><td><strong>%identifier%</strong></td> <td>feature/XY-123-my_Branch-name</td></tr> <tr><td><strong>%slug.without-feature%</strong></td> <td>xy123mybranchname</td></tr></tbody></table> <p>Here's an example blueprint:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">blueprint</span><span class="token punctuation">:</span>
  <span class="token key atrule">inheritsFrom</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//some.host/data.yaml
  <span class="token key atrule">configName</span><span class="token punctuation">:</span> <span class="token string">'%project-slug%-%slug.with-hyphens.without-feature%.some.host.tld'</span>
  <span class="token key atrule">branch</span><span class="token punctuation">:</span> <span class="token string">'%identifier%'</span>
  <span class="token key atrule">database</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">'%slug.without-feature%_mysql'</span>
  <span class="token key atrule">docker</span><span class="token punctuation">:</span>
    <span class="token key atrule">projectFolder</span><span class="token punctuation">:</span> <span class="token string">'%project-slug%--%slug.with-hyphens.without-feature%'</span>
    <span class="token key atrule">vhost</span><span class="token punctuation">:</span> <span class="token string">'%project-slug%-%slug.without-feature%.some.host.tld'</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">'%project-slug%%slug.without-feature%_web_1'</span>
</code></pre></div><p>And the output of <code>phab --blueprint=feature/XY-123-my_Branch-name --config=&lt;config-name&gt; output</code> is</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code>  <span class="token key atrule">phbackend-xy-123-my-branch-name.some.host.tld</span><span class="token punctuation">:</span>
    <span class="token key atrule">branch</span><span class="token punctuation">:</span> feature/XY<span class="token punctuation">-</span>123<span class="token punctuation">-</span>my_Branch<span class="token punctuation">-</span>name
    <span class="token key atrule">configName</span><span class="token punctuation">:</span> phbackend<span class="token punctuation">-</span>xy<span class="token punctuation">-</span>123<span class="token punctuation">-</span>my<span class="token punctuation">-</span>branch<span class="token punctuation">-</span>name.some.host.tld
    <span class="token key atrule">database</span><span class="token punctuation">:</span>
      <span class="token key atrule">name</span><span class="token punctuation">:</span> xy123mybranchname_mysql
    <span class="token key atrule">docker</span><span class="token punctuation">:</span>
      <span class="token key atrule">name</span><span class="token punctuation">:</span> phbackendxy123mybranchname_web_1
      <span class="token key atrule">projectFolder</span><span class="token punctuation">:</span> phbackend<span class="token punctuation">-</span><span class="token punctuation">-</span>xy<span class="token punctuation">-</span>123<span class="token punctuation">-</span>my<span class="token punctuation">-</span>branch<span class="token punctuation">-</span>name
      <span class="token key atrule">vhost</span><span class="token punctuation">:</span> phbackend<span class="token punctuation">-</span>xy123mybranchname.some.host.tld
    <span class="token key atrule">inheritsFrom</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//some.host/data.yaml
</code></pre></div><p><strong>Note</strong></p> <p>You can create new configurations via the global <code>blueprints</code>-settings:</p> <div class="language- extra-class"><pre class="language-text"><code>blueprints:
  - configName: mbb
    variants:
      - de
      - en
      - it
      - fr
</code></pre></div><p>will create 4 new configurations using the blueprint-config <code>mbb</code>.</p> <p><strong>Note</strong></p> <p>You can even create a new host-config from a blueprint and override some of its setting:</p> <div class="language- extra-class"><pre class="language-text"><code>hosts:
  myHost:
    inheritFromBluePrint:
      config: my-blueprint-config
      variant: my-variable
    otherSettings...
</code></pre></div><h3 id="variants"><a href="#variants" class="header-anchor">#</a> --variants</h3> <p>When using <code>blueprint</code>, you can run one command on multiple variants Just pass the <code>--variants</code>-flag with the wanted variants.</p> <div class="language- extra-class"><pre class="language-text"><code>phab --config=my-blueprinted-config --variants=all  about
phab --config=my-blueprinted-config --variants=de,it,fr  about

</code></pre></div><p>This will prompt you with a list of commands which phab will run and ask for confirmation.</p> <h3 id="s-set"><a href="#s-set" class="header-anchor">#</a> -s / --set</h3> <p>You can override existing configuration using the dot notation and pass arbitrary values to phabalicious. Currently this is supported for host configs and dockerhost configs.</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">hosts</span><span class="token punctuation">:</span>
  <span class="token key atrule">example</span><span class="token punctuation">:</span>
    <span class="token key atrule">host</span><span class="token punctuation">:</span> example.test
    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">2222</span>
    <span class="token punctuation">...</span>
</code></pre></div><p>To set a value from command line just pass it via the <code>--set</code>-option:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>phab -cexample about --set host.host<span class="token operator">=</span>overriden.test --set host.port<span class="token operator">=</span><span class="token number">22</span>
</code></pre></div><h3 id="a-arguments"><a href="#a-arguments" class="header-anchor">#</a> -a / --arguments</h3> <p>Pass arbitrary arguments to scripts or other parts. Passed arguments can be consumed by scripts using <code>%arguments.&lt;name&gt;%</code> syntax. An example:</p> <div class="language- extra-class"><pre class="language-text"><code>scripts:
  test-arguments:
    - echo %arguments.message%
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code>phab -c<span class="token operator">&lt;</span>yourconfig<span class="token operator">&gt;</span> script test-arguments --arguments <span class="token assign-left variable">message</span><span class="token operator">=</span><span class="token string">&quot;hello world&quot;</span>
</code></pre></div><h3 id="offline-2"><a href="#offline-2" class="header-anchor">#</a> --offline</h3> <p>Prevent loading of additional data from remote. Helpful when you do not have an internet connection.</p> <h3 id="skip-cache"><a href="#skip-cache" class="header-anchor">#</a> --skip-cache</h3> <p>Phab caches remote files in <code>~/.phabalicious</code> and will use the cached version if it not older than an hour. If you think you get outdated information, pass this flag. It makes sure, that all remote data is read from remote and updates the file-cache.</p> <h2 id="used-environment-variables"><a href="#used-environment-variables" class="header-anchor">#</a> Used environment variables:</h2> <ul><li><code>PHABALICIOUS_EXECUTABLE</code> allows to override the phab executable when using variants</li> <li><code>PHABALICIOUS_DEFAULT_CONFIG</code> sets the default config name to use, when no config name was given via the <code>--config</code> flag</li> <li><code>PHABALICIOUS_FORCE_GIT_ARTIFACT_DEPLOYMENT</code> forces the git artifact deployment.</li> <li><code>PHAB_OP_FILE_PATH</code> file path to <a href="/passwords.html">1password</a> executable.</li> <li><code>PHAB_OP_JWT_TOKEN__&lt;TOKEN_ID&gt;</code> token for <a href="/password.html">1password</a> connect</li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/factorial-io/phabalicious/edit/master/docs/usage.md" target="_blank" rel="noopener noreferrer">Help us improve this page!</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/installation.html" class="prev">
        Installation
      </a></span> <span class="next"><a href="/configuration.html">
        Structure of the configuration file
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.6b382d26.js" defer></script><script src="/assets/js/3.2184e550.js" defer></script><script src="/assets/js/32.265cdd80.js" defer></script>
  </body>
</html>
